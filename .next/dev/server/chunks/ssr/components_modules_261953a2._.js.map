{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/rtfforensics_final/components/modules/cdr-analyzer.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useCallback, useMemo } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport {\n  Download,\n  FileSpreadsheet,\n  Search,\n  Clock,\n  Users,\n  Radio,\n  BarChart3,\n  Phone,\n  ArrowDownLeft,\n  ArrowUpRight,\n  MessageSquare,\n  Loader2,\n  TrendingUp,\n} from \"lucide-react\"\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\"\nimport EnhancedFileUploader from \"@/components/enhanced-file-uploader\"\nimport DataTable from \"@/components/data-table\"\nimport { useDataStore } from \"@/lib/data-store\"\nimport type { ParsedData } from \"@/lib/file-parser\"\nimport { exportReport } from \"@/lib/report-generator\"\nimport { Bar, BarChart, XAxis, YAxis, Tooltip, ResponsiveContainer, Cell, Area, AreaChart } from \"recharts\"\n\nexport default function CDRAnalyzer() {\n  const [parsedData, setParsedData] = useState<ParsedData | null>(null)\n  const [isExporting, setIsExporting] = useState(false)\n  const [searchQuery, setSearchQuery] = useState(\"\")\n  const { addSession } = useDataStore()\n\n  const handleFileComplete = useCallback(\n    (data: ParsedData) => {\n      setParsedData(data)\n      addSession(\"cdr\", \"CDR Analysis\", data)\n    },\n    [addSession],\n  )\n\n  const handleExport = async (format: string) => {\n    if (!parsedData) return\n    setIsExporting(true)\n    try {\n      const config = {\n        selectedReports: [\"cdr\"],\n        selectedFormat: format,\n        caseInfo: {\n          caseNumber: \"\",\n          investigator: \"\",\n          date: new Date().toISOString().split(\"T\")[0],\n          notes: \"\",\n        },\n        includeCharts: true,\n        includeMaps: false,\n        includeTables: true,\n        includeSummary: true,\n      }\n      exportReport(config, { cdr: parsedData })\n    } finally {\n      setIsExporting(false)\n    }\n  }\n\n  const bPartyChartData = useMemo(() => {\n    if (!parsedData?.analytics?.topBParty) return []\n    return parsedData.analytics.topBParty.slice(0, 10).map((item, index) => ({\n      name: item.number.slice(-4),\n      fullNumber: item.number,\n      count: item.count,\n      color: index === 0 ? \"#22d3ee\" : index < 3 ? \"#0ea5e9\" : \"#6b7280\",\n    }))\n  }, [parsedData])\n\n  const timelineChartData = useMemo(() => {\n    if (!parsedData?.analytics?.timelineData) return []\n    return parsedData.analytics.timelineData.map((item) => ({\n      date: item.date.slice(5), // MM-DD format\n      fullDate: item.date,\n      calls: item.calls,\n      sms: item.sms,\n      total: item.calls + item.sms + item.data,\n    }))\n  }, [parsedData])\n\n  const hourlyChartData = useMemo(() => {\n    if (!parsedData?.analytics?.hourlyDistribution) return []\n    return parsedData.analytics.hourlyDistribution.map((item) => ({\n      hour: `${item.hour.toString().padStart(2, \"0\")}:00`,\n      count: item.count,\n    }))\n  }, [parsedData])\n\n  const stats = parsedData\n    ? [\n        {\n          label: \"Total Records\",\n          value: parsedData.rows.length.toLocaleString(),\n          icon: FileSpreadsheet,\n          color: \"text-cyan-400\",\n          bgColor: \"bg-cyan-500/10\",\n        },\n        {\n          label: \"Unique B-Party\",\n          value: parsedData.analytics?.uniqueBParty?.toLocaleString() || \"0\",\n          icon: Users,\n          color: \"text-blue-400\",\n          bgColor: \"bg-blue-500/10\",\n        },\n        {\n          label: \"Total Duration\",\n          value: parsedData.analytics?.totalDuration || \"N/A\",\n          icon: Clock,\n          color: \"text-teal-400\",\n          bgColor: \"bg-teal-500/10\",\n        },\n        {\n          label: \"Tower Hits\",\n          value: parsedData.analytics?.towerHits?.toLocaleString() || \"0\",\n          icon: Radio,\n          color: \"text-sky-400\",\n          bgColor: \"bg-sky-500/10\",\n        },\n      ]\n    : []\n\n  const callStats = parsedData?.analytics\n    ? [\n        {\n          label: \"Incoming\",\n          value: parsedData.analytics.incomingCalls || 0,\n          icon: ArrowDownLeft,\n          color: \"text-emerald-400\",\n          bgColor: \"bg-emerald-500/10\",\n        },\n        {\n          label: \"Outgoing\",\n          value: parsedData.analytics.outgoingCalls || 0,\n          icon: ArrowUpRight,\n          color: \"text-blue-400\",\n          bgColor: \"bg-blue-500/10\",\n        },\n        {\n          label: \"SMS\",\n          value: parsedData.analytics.smsCount || 0,\n          icon: MessageSquare,\n          color: \"text-cyan-400\",\n          bgColor: \"bg-cyan-500/10\",\n        },\n        {\n          label: \"IMEI Count\",\n          value: parsedData.analytics.uniqueIMEI || 0,\n          icon: Phone,\n          color: \"text-indigo-400\",\n          bgColor: \"bg-indigo-500/10\",\n        },\n      ]\n    : []\n\n  return (\n    <div className=\"p-8 space-y-6 max-w-[1600px] mx-auto\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-foreground flex items-center gap-3\">\n            <span className=\"w-1.5 h-6 bg-gradient-to-b from-cyan-500 to-blue-500 rounded-full\" />\n            CDR Analyzer\n          </h1>\n          <p className=\"text-muted-foreground mt-1\">Analyze Call Detail Records from mobile operators</p>\n        </div>\n        {parsedData && (\n          <div className=\"flex items-center gap-3\">\n            <Button\n              variant=\"outline\"\n              className=\"gap-2 bg-transparent border-border hover:border-cyan-500/50\"\n              onClick={() => setParsedData(null)}\n            >\n              Upload New File\n            </Button>\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button\n                  className=\"gap-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500\"\n                  disabled={isExporting}\n                >\n                  {isExporting ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Download className=\"w-4 h-4\" />}\n                  Export Report\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\" className=\"w-48\">\n                <DropdownMenuItem onClick={() => handleExport(\"pdf\")}>Export as PDF</DropdownMenuItem>\n                <DropdownMenuItem onClick={() => handleExport(\"excel\")}>Export as Excel</DropdownMenuItem>\n                <DropdownMenuItem onClick={() => handleExport(\"csv\")}>Export as CSV</DropdownMenuItem>\n                <DropdownMenuItem onClick={() => handleExport(\"html\")}>Export as HTML</DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          </div>\n        )}\n      </div>\n\n      {!parsedData && (\n        <EnhancedFileUploader\n          onComplete={handleFileComplete}\n          moduleType=\"cdr\"\n          acceptedFormats={[\".xls\", \".xlsx\", \".csv\", \".txt\"]}\n        />\n      )}\n\n      {parsedData && (\n        <>\n          {/* Primary stats */}\n          <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n            {stats.map((stat) => {\n              const Icon = stat.icon\n              return (\n                <Card key={stat.label} className=\"bg-card border-border hover:border-cyan-500/30 transition-colors\">\n                  <CardContent className=\"p-5\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm text-muted-foreground\">{stat.label}</p>\n                        <p className=\"text-2xl font-bold text-foreground mt-1\">{stat.value}</p>\n                      </div>\n                      <div className={`w-11 h-11 ${stat.bgColor} rounded-xl flex items-center justify-center`}>\n                        <Icon className={`w-5 h-5 ${stat.color}`} />\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              )\n            })}\n          </div>\n\n          {/* Secondary stats - call breakdown */}\n          {callStats.some((s) => s.value > 0) && (\n            <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n              {callStats.map((stat) => {\n                const Icon = stat.icon\n                return (\n                  <Card key={stat.label} className=\"bg-card border-border\">\n                    <CardContent className=\"p-4\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className={`w-9 h-9 ${stat.bgColor} rounded-lg flex items-center justify-center`}>\n                          <Icon className={`w-4 h-4 ${stat.color}`} />\n                        </div>\n                        <div>\n                          <p className=\"text-lg font-semibold text-foreground\">{stat.value.toLocaleString()}</p>\n                          <p className=\"text-xs text-muted-foreground\">{stat.label}</p>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                )\n              })}\n            </div>\n          )}\n\n          {/* Time span info */}\n          {parsedData.analytics?.firstActivity && (\n            <Card className=\"bg-card border-cyan-500/20\">\n              <CardContent className=\"py-4 px-5\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-6\">\n                    <div>\n                      <p className=\"text-xs text-cyan-400/70\">First Activity</p>\n                      <p className=\"text-sm font-medium text-foreground\">{parsedData.analytics.firstActivity}</p>\n                    </div>\n                    <div className=\"w-px h-8 bg-cyan-500/20\" />\n                    <div>\n                      <p className=\"text-xs text-cyan-400/70\">Last Activity</p>\n                      <p className=\"text-sm font-medium text-foreground\">{parsedData.analytics.lastActivity}</p>\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"text-xs text-cyan-400/70\">Unique Towers</p>\n                    <p className=\"text-sm font-medium text-foreground\">{parsedData.analytics.towerCount || 0}</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          <Tabs defaultValue=\"data\" className=\"space-y-4\">\n            <TabsList className=\"bg-secondary\">\n              <TabsTrigger value=\"data\">Raw Data</TabsTrigger>\n              <TabsTrigger value=\"bparty\">B-Party Analysis</TabsTrigger>\n              <TabsTrigger value=\"timeline\">Timeline</TabsTrigger>\n              <TabsTrigger value=\"towers\">Tower Activity</TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"data\" className=\"space-y-4\">\n              <Card className=\"bg-card border-border\">\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"text-base\">CDR Records ({parsedData.rows.length.toLocaleString()})</CardTitle>\n                    <div className=\"relative w-72\">\n                      <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                      <Input\n                        placeholder=\"Search records...\"\n                        value={searchQuery}\n                        onChange={(e) => setSearchQuery(e.target.value)}\n                        className=\"pl-9 bg-secondary border-border focus:border-cyan-500/50\"\n                      />\n                    </div>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <DataTable\n                    columns={parsedData.headers}\n                    data={parsedData.rows}\n                    searchQuery={searchQuery}\n                    pageSize={15}\n                  />\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"bparty\">\n              <div className=\"grid lg:grid-cols-2 gap-6\">\n                <Card className=\"bg-card border-border\">\n                  <CardHeader>\n                    <CardTitle className=\"text-base\">Top 10 B-Party Numbers</CardTitle>\n                    <CardDescription>Most frequently contacted numbers</CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    {bPartyChartData.length > 0 ? (\n                      <div className=\"h-72\">\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\n                          <BarChart data={bPartyChartData} layout=\"vertical\" margin={{ left: 10, right: 30 }}>\n                            <XAxis type=\"number\" stroke=\"#6b7280\" fontSize={12} />\n                            <YAxis type=\"category\" dataKey=\"name\" stroke=\"#6b7280\" fontSize={12} width={50} />\n                            <Tooltip\n                              contentStyle={{\n                                backgroundColor: \"#1e293b\",\n                                border: \"1px solid #0ea5e9\",\n                                borderRadius: \"8px\",\n                              }}\n                              labelStyle={{ color: \"#f9fafb\" }}\n                              formatter={(value: number, name: string, props?: any) => [\n                                value,\n                                props?.payload?.fullNumber || name,\n                              ]}\n                            />\n                            <Bar dataKey=\"count\" radius={[0, 4, 4, 0]}>\n                              {bPartyChartData.map((entry, index) => (\n                                <Cell key={`cell-${index}`} fill={entry.color} />\n                              ))}\n                            </Bar>\n                          </BarChart>\n                        </ResponsiveContainer>\n                      </div>\n                    ) : (\n                      <div className=\"h-64 flex items-center justify-center text-muted-foreground\">\n                        No B-Party data available\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n\n                <Card className=\"bg-card border-border\">\n                  <CardHeader>\n                    <CardTitle className=\"text-base\">Top 100 B-Party List</CardTitle>\n                    <CardDescription>Complete frequency breakdown</CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"max-h-72 overflow-y-auto space-y-1\">\n                      {parsedData.analytics?.topBParty?.slice(0, 100).map((item, index) => (\n                        <div\n                          key={item.number}\n                          className=\"flex items-center justify-between py-2 px-3 rounded-lg hover:bg-cyan-500/5 transition-colors\"\n                        >\n                          <div className=\"flex items-center gap-3\">\n                            <span className=\"w-6 h-6 rounded-full bg-gradient-to-br from-cyan-500/20 to-blue-500/20 flex items-center justify-center text-xs font-medium text-cyan-300\">\n                              {index + 1}\n                            </span>\n                            <span className=\"font-mono text-sm\">{item.number}</span>\n                          </div>\n                          <span className=\"text-sm text-cyan-400/70\">{item.count} calls</span>\n                        </div>\n                      )) || <p className=\"text-center text-muted-foreground py-8\">No data available</p>}\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"timeline\">\n              <div className=\"grid lg:grid-cols-2 gap-6\">\n                <Card className=\"bg-card border-border\">\n                  <CardHeader>\n                    <CardTitle className=\"text-base flex items-center gap-2\">\n                      <TrendingUp className=\"w-4 h-4 text-cyan-400\" />\n                      Activity Over Time\n                    </CardTitle>\n                    <CardDescription>Daily call and SMS activity</CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    {timelineChartData.length > 0 ? (\n                      <div className=\"h-72\">\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\n                          <AreaChart data={timelineChartData} margin={{ top: 10, right: 30, left: 0, bottom: 0 }}>\n                            <XAxis dataKey=\"date\" stroke=\"#6b7280\" fontSize={11} />\n                            <YAxis stroke=\"#6b7280\" fontSize={11} />\n                            <Tooltip\n                              contentStyle={{\n                                backgroundColor: \"#1e293b\",\n                                border: \"1px solid #0ea5e9\",\n                                borderRadius: \"8px\",\n                              }}\n                              labelFormatter={(label, payload) => payload[0]?.payload?.fullDate || label}\n                            />\n                            <Area\n                              type=\"monotone\"\n                              dataKey=\"calls\"\n                              stackId=\"1\"\n                              stroke=\"#22d3ee\"\n                              fill=\"#22d3ee\"\n                              fillOpacity={0.3}\n                              name=\"Calls\"\n                            />\n                            <Area\n                              type=\"monotone\"\n                              dataKey=\"sms\"\n                              stackId=\"1\"\n                              stroke=\"#3b82f6\"\n                              fill=\"#3b82f6\"\n                              fillOpacity={0.3}\n                              name=\"SMS\"\n                            />\n                          </AreaChart>\n                        </ResponsiveContainer>\n                      </div>\n                    ) : (\n                      <div className=\"h-64 flex items-center justify-center text-muted-foreground\">\n                        <div className=\"text-center\">\n                          <BarChart3 className=\"w-12 h-12 mx-auto mb-2 text-cyan-500/30\" />\n                          <p>Timeline data requires date/time column</p>\n                        </div>\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n\n                <Card className=\"bg-card border-border\">\n                  <CardHeader>\n                    <CardTitle className=\"text-base flex items-center gap-2\">\n                      <Clock className=\"w-4 h-4 text-cyan-400\" />\n                      Hourly Distribution\n                    </CardTitle>\n                    <CardDescription>Activity by hour of day</CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    {hourlyChartData.length > 0 && hourlyChartData.some((h) => h.count > 0) ? (\n                      <div className=\"h-72\">\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\n                          <BarChart data={hourlyChartData} margin={{ top: 10, right: 10, left: 0, bottom: 0 }}>\n                            <XAxis dataKey=\"hour\" stroke=\"#6b7280\" fontSize={10} interval={2} />\n                            <YAxis stroke=\"#6b7280\" fontSize={11} />\n                            <Tooltip\n                              contentStyle={{\n                                backgroundColor: \"#1e293b\",\n                                border: \"1px solid #0ea5e9\",\n                                borderRadius: \"8px\",\n                              }}\n                            />\n                            <Bar dataKey=\"count\" fill=\"#22d3ee\" radius={[4, 4, 0, 0]} name=\"Activity\" />\n                          </BarChart>\n                        </ResponsiveContainer>\n                      </div>\n                    ) : (\n                      <div className=\"h-64 flex items-center justify-center text-muted-foreground\">\n                        <div className=\"text-center\">\n                          <Clock className=\"w-12 h-12 mx-auto mb-2 text-cyan-500/30\" />\n                          <p>Hourly distribution requires timestamp data</p>\n                        </div>\n                      </div>\n                    )}\n                  </CardContent>\n                </Card>\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"towers\">\n              <Card className=\"bg-card border-border\">\n                <CardHeader>\n                  <CardTitle className=\"text-base\">Tower Activity Summary</CardTitle>\n                  <CardDescription>{parsedData.analytics?.towerCount || 0} unique towers detected</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {parsedData.analytics?.towerLocations && parsedData.analytics.towerLocations.length > 0 ? (\n                    <div className=\"max-h-80 overflow-y-auto\">\n                      <table className=\"w-full text-sm\">\n                        <thead>\n                          <tr className=\"border-b border-border\">\n                            <th className=\"text-left py-3 px-4 font-medium text-muted-foreground\">Rank</th>\n                            <th className=\"text-left py-3 px-4 font-medium text-muted-foreground\">LAC</th>\n                            <th className=\"text-left py-3 px-4 font-medium text-muted-foreground\">Cell ID</th>\n                            <th className=\"text-left py-3 px-4 font-medium text-muted-foreground\">Hits</th>\n                            <th className=\"text-left py-3 px-4 font-medium text-muted-foreground\">Coordinates</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {parsedData.analytics.towerLocations.slice(0, 50).map((tower, idx) => (\n                            <tr\n                              key={`${tower.lac}-${tower.ci}`}\n                              className=\"border-b border-border/50 hover:bg-secondary/30\"\n                            >\n                              <td className=\"py-3 px-4\">\n                                <span className=\"w-6 h-6 rounded-full bg-cyan-500/20 flex items-center justify-center text-xs text-cyan-400\">\n                                  {idx + 1}\n                                </span>\n                              </td>\n                              <td className=\"py-3 px-4 font-mono\">{tower.lac || \"-\"}</td>\n                              <td className=\"py-3 px-4 font-mono\">{tower.ci || \"-\"}</td>\n                              <td className=\"py-3 px-4 font-semibold text-cyan-400\">{tower.count}</td>\n                              <td className=\"py-3 px-4 text-muted-foreground\">\n                                {tower.lat && tower.lng ? `${tower.lat.toFixed(4)}, ${tower.lng.toFixed(4)}` : \"-\"}\n                              </td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  ) : (\n                    <div className=\"h-72 flex items-center justify-center\">\n                      <div className=\"text-center text-muted-foreground\">\n                        <Radio className=\"w-12 h-12 mx-auto mb-2 text-cyan-500/30\" />\n                        <p>Tower activity requires LAC/CI columns</p>\n                        <p className=\"text-xs mt-1\">View in GEO Intelligence for map visualization</p>\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA5BA;;;;;;;;;;;;;;AA8Be,SAAS;IACtB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,gVAAQ,EAAoB;IAChE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,gVAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,gVAAQ,EAAC;IAC/C,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,qIAAY;IAEnC,MAAM,qBAAqB,IAAA,mVAAW,EACpC,CAAC;QACC,cAAc;QACd,WAAW,OAAO,gBAAgB;IACpC,GACA;QAAC;KAAW;IAGd,MAAM,eAAe,OAAO;QAC1B,IAAI,CAAC,YAAY;QACjB,eAAe;QACf,IAAI;YACF,MAAM,SAAS;gBACb,iBAAiB;oBAAC;iBAAM;gBACxB,gBAAgB;gBAChB,UAAU;oBACR,YAAY;oBACZ,cAAc;oBACd,MAAM,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;oBAC5C,OAAO;gBACT;gBACA,eAAe;gBACf,aAAa;gBACb,eAAe;gBACf,gBAAgB;YAClB;YACA,IAAA,2IAAY,EAAC,QAAQ;gBAAE,KAAK;YAAW;QACzC,SAAU;YACR,eAAe;QACjB;IACF;IAEA,MAAM,kBAAkB,IAAA,+UAAO,EAAC;QAC9B,IAAI,CAAC,YAAY,WAAW,WAAW,OAAO,EAAE;QAChD,OAAO,WAAW,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,MAAM,QAAU,CAAC;gBACvE,MAAM,KAAK,MAAM,CAAC,KAAK,CAAC,CAAC;gBACzB,YAAY,KAAK,MAAM;gBACvB,OAAO,KAAK,KAAK;gBACjB,OAAO,UAAU,IAAI,YAAY,QAAQ,IAAI,YAAY;YAC3D,CAAC;IACH,GAAG;QAAC;KAAW;IAEf,MAAM,oBAAoB,IAAA,+UAAO,EAAC;QAChC,IAAI,CAAC,YAAY,WAAW,cAAc,OAAO,EAAE;QACnD,OAAO,WAAW,SAAS,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,OAAS,CAAC;gBACtD,MAAM,KAAK,IAAI,CAAC,KAAK,CAAC;gBACtB,UAAU,KAAK,IAAI;gBACnB,OAAO,KAAK,KAAK;gBACjB,KAAK,KAAK,GAAG;gBACb,OAAO,KAAK,KAAK,GAAG,KAAK,GAAG,GAAG,KAAK,IAAI;YAC1C,CAAC;IACH,GAAG;QAAC;KAAW;IAEf,MAAM,kBAAkB,IAAA,+UAAO,EAAC;QAC9B,IAAI,CAAC,YAAY,WAAW,oBAAoB,OAAO,EAAE;QACzD,OAAO,WAAW,SAAS,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC,OAAS,CAAC;gBAC5D,MAAM,GAAG,KAAK,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,GAAG,CAAC;gBACnD,OAAO,KAAK,KAAK;YACnB,CAAC;IACH,GAAG;QAAC;KAAW;IAEf,MAAM,QAAQ,aACV;QACE;YACE,OAAO;YACP,OAAO,WAAW,IAAI,CAAC,MAAM,CAAC,cAAc;YAC5C,MAAM,mUAAe;YACrB,OAAO;YACP,SAAS;QACX;QACA;YACE,OAAO;YACP,OAAO,WAAW,SAAS,EAAE,cAAc,oBAAoB;YAC/D,MAAM,iSAAK;YACX,OAAO;YACP,SAAS;QACX;QACA;YACE,OAAO;YACP,OAAO,WAAW,SAAS,EAAE,iBAAiB;YAC9C,MAAM,iSAAK;YACX,OAAO;YACP,SAAS;QACX;QACA;YACE,OAAO;YACP,OAAO,WAAW,SAAS,EAAE,WAAW,oBAAoB;YAC5D,MAAM,iSAAK;YACX,OAAO;YACP,SAAS;QACX;KACD,GACD,EAAE;IAEN,MAAM,YAAY,YAAY,YAC1B;QACE;YACE,OAAO;YACP,OAAO,WAAW,SAAS,CAAC,aAAa,IAAI;YAC7C,MAAM,iUAAa;YACnB,OAAO;YACP,SAAS;QACX;QACA;YACE,OAAO;YACP,OAAO,WAAW,SAAS,CAAC,aAAa,IAAI;YAC7C,MAAM,8TAAY;YAClB,OAAO;YACP,SAAS;QACX;QACA;YACE,OAAO;YACP,OAAO,WAAW,SAAS,CAAC,QAAQ,IAAI;YACxC,MAAM,6TAAa;YACnB,OAAO;YACP,SAAS;QACX;QACA;YACE,OAAO;YACP,OAAO,WAAW,SAAS,CAAC,UAAU,IAAI;YAC1C,MAAM,iSAAK;YACX,OAAO;YACP,SAAS;QACX;KACD,GACD,EAAE;IAEN,qBACE,6WAAC;QAAI,WAAU;;0BACb,6WAAC;gBAAI,WAAU;;kCACb,6WAAC;;0CACC,6WAAC;gCAAG,WAAU;;kDACZ,6WAAC;wCAAK,WAAU;;;;;;oCAAsE;;;;;;;0CAGxF,6WAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;oBAE3C,4BACC,6WAAC;wBAAI,WAAU;;0CACb,6WAAC,qIAAM;gCACL,SAAQ;gCACR,WAAU;gCACV,SAAS,IAAM,cAAc;0CAC9B;;;;;;0CAGD,6WAAC,qJAAY;;kDACX,6WAAC,4JAAmB;wCAAC,OAAO;kDAC1B,cAAA,6WAAC,qIAAM;4CACL,WAAU;4CACV,UAAU;;gDAET,4BAAc,6WAAC,gTAAO;oDAAC,WAAU;;;;;yEAA4B,6WAAC,0SAAQ;oDAAC,WAAU;;;;;;gDAAa;;;;;;;;;;;;kDAInG,6WAAC,4JAAmB;wCAAC,OAAM;wCAAM,WAAU;;0DACzC,6WAAC,yJAAgB;gDAAC,SAAS,IAAM,aAAa;0DAAQ;;;;;;0DACtD,6WAAC,yJAAgB;gDAAC,SAAS,IAAM,aAAa;0DAAU;;;;;;0DACxD,6WAAC,yJAAgB;gDAAC,SAAS,IAAM,aAAa;0DAAQ;;;;;;0DACtD,6WAAC,yJAAgB;gDAAC,SAAS,IAAM,aAAa;0DAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAOhE,CAAC,4BACA,6WAAC,sJAAoB;gBACnB,YAAY;gBACZ,YAAW;gBACX,iBAAiB;oBAAC;oBAAQ;oBAAS;oBAAQ;iBAAO;;;;;;YAIrD,4BACC;;kCAEE,6WAAC;wBAAI,WAAU;kCACZ,MAAM,GAAG,CAAC,CAAC;4BACV,MAAM,OAAO,KAAK,IAAI;4BACtB,qBACE,6WAAC,iIAAI;gCAAkB,WAAU;0CAC/B,cAAA,6WAAC,wIAAW;oCAAC,WAAU;8CACrB,cAAA,6WAAC;wCAAI,WAAU;;0DACb,6WAAC;;kEACC,6WAAC;wDAAE,WAAU;kEAAiC,KAAK,KAAK;;;;;;kEACxD,6WAAC;wDAAE,WAAU;kEAA2C,KAAK,KAAK;;;;;;;;;;;;0DAEpE,6WAAC;gDAAI,WAAW,CAAC,UAAU,EAAE,KAAK,OAAO,CAAC,4CAA4C,CAAC;0DACrF,cAAA,6WAAC;oDAAK,WAAW,CAAC,QAAQ,EAAE,KAAK,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;;+BARrC,KAAK,KAAK;;;;;wBAczB;;;;;;oBAID,UAAU,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,GAAG,oBAC/B,6WAAC;wBAAI,WAAU;kCACZ,UAAU,GAAG,CAAC,CAAC;4BACd,MAAM,OAAO,KAAK,IAAI;4BACtB,qBACE,6WAAC,iIAAI;gCAAkB,WAAU;0CAC/B,cAAA,6WAAC,wIAAW;oCAAC,WAAU;8CACrB,cAAA,6WAAC;wCAAI,WAAU;;0DACb,6WAAC;gDAAI,WAAW,CAAC,QAAQ,EAAE,KAAK,OAAO,CAAC,4CAA4C,CAAC;0DACnF,cAAA,6WAAC;oDAAK,WAAW,CAAC,QAAQ,EAAE,KAAK,KAAK,EAAE;;;;;;;;;;;0DAE1C,6WAAC;;kEACC,6WAAC;wDAAE,WAAU;kEAAyC,KAAK,KAAK,CAAC,cAAc;;;;;;kEAC/E,6WAAC;wDAAE,WAAU;kEAAiC,KAAK,KAAK;;;;;;;;;;;;;;;;;;;;;;;+BARrD,KAAK,KAAK;;;;;wBAczB;;;;;;oBAKH,WAAW,SAAS,EAAE,+BACrB,6WAAC,iIAAI;wBAAC,WAAU;kCACd,cAAA,6WAAC,wIAAW;4BAAC,WAAU;sCACrB,cAAA,6WAAC;gCAAI,WAAU;;kDACb,6WAAC;wCAAI,WAAU;;0DACb,6WAAC;;kEACC,6WAAC;wDAAE,WAAU;kEAA2B;;;;;;kEACxC,6WAAC;wDAAE,WAAU;kEAAuC,WAAW,SAAS,CAAC,aAAa;;;;;;;;;;;;0DAExF,6WAAC;gDAAI,WAAU;;;;;;0DACf,6WAAC;;kEACC,6WAAC;wDAAE,WAAU;kEAA2B;;;;;;kEACxC,6WAAC;wDAAE,WAAU;kEAAuC,WAAW,SAAS,CAAC,YAAY;;;;;;;;;;;;;;;;;;kDAGzF,6WAAC;wCAAI,WAAU;;0DACb,6WAAC;gDAAE,WAAU;0DAA2B;;;;;;0DACxC,6WAAC;gDAAE,WAAU;0DAAuC,WAAW,SAAS,CAAC,UAAU,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAOjG,6WAAC,iIAAI;wBAAC,cAAa;wBAAO,WAAU;;0CAClC,6WAAC,qIAAQ;gCAAC,WAAU;;kDAClB,6WAAC,wIAAW;wCAAC,OAAM;kDAAO;;;;;;kDAC1B,6WAAC,wIAAW;wCAAC,OAAM;kDAAS;;;;;;kDAC5B,6WAAC,wIAAW;wCAAC,OAAM;kDAAW;;;;;;kDAC9B,6WAAC,wIAAW;wCAAC,OAAM;kDAAS;;;;;;;;;;;;0CAG9B,6WAAC,wIAAW;gCAAC,OAAM;gCAAO,WAAU;0CAClC,cAAA,6WAAC,iIAAI;oCAAC,WAAU;;sDACd,6WAAC,uIAAU;4CAAC,WAAU;sDACpB,cAAA,6WAAC;gDAAI,WAAU;;kEACb,6WAAC,sIAAS;wDAAC,WAAU;;4DAAY;4DAAc,WAAW,IAAI,CAAC,MAAM,CAAC,cAAc;4DAAG;;;;;;;kEACvF,6WAAC;wDAAI,WAAU;;0EACb,6WAAC,oSAAM;gEAAC,WAAU;;;;;;0EAClB,6WAAC,mIAAK;gEACJ,aAAY;gEACZ,OAAO;gEACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gEAC9C,WAAU;;;;;;;;;;;;;;;;;;;;;;;sDAKlB,6WAAC,wIAAW;sDACV,cAAA,6WAAC,uIAAS;gDACR,SAAS,WAAW,OAAO;gDAC3B,MAAM,WAAW,IAAI;gDACrB,aAAa;gDACb,UAAU;;;;;;;;;;;;;;;;;;;;;;0CAMlB,6WAAC,wIAAW;gCAAC,OAAM;0CACjB,cAAA,6WAAC;oCAAI,WAAU;;sDACb,6WAAC,iIAAI;4CAAC,WAAU;;8DACd,6WAAC,uIAAU;;sEACT,6WAAC,sIAAS;4DAAC,WAAU;sEAAY;;;;;;sEACjC,6WAAC,4IAAe;sEAAC;;;;;;;;;;;;8DAEnB,6WAAC,wIAAW;8DACT,gBAAgB,MAAM,GAAG,kBACxB,6WAAC;wDAAI,WAAU;kEACb,cAAA,6WAAC,gZAAmB;4DAAC,OAAM;4DAAO,QAAO;sEACvC,cAAA,6WAAC,sXAAQ;gEAAC,MAAM;gEAAiB,QAAO;gEAAW,QAAQ;oEAAE,MAAM;oEAAI,OAAO;gEAAG;;kFAC/E,6WAAC,oXAAK;wEAAC,MAAK;wEAAS,QAAO;wEAAU,UAAU;;;;;;kFAChD,6WAAC,oXAAK;wEAAC,MAAK;wEAAW,SAAQ;wEAAO,QAAO;wEAAU,UAAU;wEAAI,OAAO;;;;;;kFAC5E,6WAAC,wXAAO;wEACN,cAAc;4EACZ,iBAAiB;4EACjB,QAAQ;4EACR,cAAc;wEAChB;wEACA,YAAY;4EAAE,OAAO;wEAAU;wEAC/B,WAAW,CAAC,OAAe,MAAc,QAAgB;gFACvD;gFACA,OAAO,SAAS,cAAc;6EAC/B;;;;;;kFAEH,6WAAC,gXAAG;wEAAC,SAAQ;wEAAQ,QAAQ;4EAAC;4EAAG;4EAAG;4EAAG;yEAAE;kFACtC,gBAAgB,GAAG,CAAC,CAAC,OAAO,sBAC3B,6WAAC,kXAAI;gFAAuB,MAAM,MAAM,KAAK;+EAAlC,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;6EAOpC,6WAAC;wDAAI,WAAU;kEAA8D;;;;;;;;;;;;;;;;;sDAOnF,6WAAC,iIAAI;4CAAC,WAAU;;8DACd,6WAAC,uIAAU;;sEACT,6WAAC,sIAAS;4DAAC,WAAU;sEAAY;;;;;;sEACjC,6WAAC,4IAAe;sEAAC;;;;;;;;;;;;8DAEnB,6WAAC,wIAAW;8DACV,cAAA,6WAAC;wDAAI,WAAU;kEACZ,WAAW,SAAS,EAAE,WAAW,MAAM,GAAG,KAAK,IAAI,CAAC,MAAM,sBACzD,6WAAC;gEAEC,WAAU;;kFAEV,6WAAC;wEAAI,WAAU;;0FACb,6WAAC;gFAAK,WAAU;0FACb,QAAQ;;;;;;0FAEX,6WAAC;gFAAK,WAAU;0FAAqB,KAAK,MAAM;;;;;;;;;;;;kFAElD,6WAAC;wEAAK,WAAU;;4EAA4B,KAAK,KAAK;4EAAC;;;;;;;;+DATlD,KAAK,MAAM;;;;uFAWd,6WAAC;4DAAE,WAAU;sEAAyC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0CAOtE,6WAAC,wIAAW;gCAAC,OAAM;0CACjB,cAAA,6WAAC;oCAAI,WAAU;;sDACb,6WAAC,iIAAI;4CAAC,WAAU;;8DACd,6WAAC,uIAAU;;sEACT,6WAAC,sIAAS;4DAAC,WAAU;;8EACnB,6WAAC,oTAAU;oEAAC,WAAU;;;;;;gEAA0B;;;;;;;sEAGlD,6WAAC,4IAAe;sEAAC;;;;;;;;;;;;8DAEnB,6WAAC,wIAAW;8DACT,kBAAkB,MAAM,GAAG,kBAC1B,6WAAC;wDAAI,WAAU;kEACb,cAAA,6WAAC,gZAAmB;4DAAC,OAAM;4DAAO,QAAO;sEACvC,cAAA,6WAAC,wXAAS;gEAAC,MAAM;gEAAmB,QAAQ;oEAAE,KAAK;oEAAI,OAAO;oEAAI,MAAM;oEAAG,QAAQ;gEAAE;;kFACnF,6WAAC,oXAAK;wEAAC,SAAQ;wEAAO,QAAO;wEAAU,UAAU;;;;;;kFACjD,6WAAC,oXAAK;wEAAC,QAAO;wEAAU,UAAU;;;;;;kFAClC,6WAAC,wXAAO;wEACN,cAAc;4EACZ,iBAAiB;4EACjB,QAAQ;4EACR,cAAc;wEAChB;wEACA,gBAAgB,CAAC,OAAO,UAAY,OAAO,CAAC,EAAE,EAAE,SAAS,YAAY;;;;;;kFAEvE,6WAAC,kXAAI;wEACH,MAAK;wEACL,SAAQ;wEACR,SAAQ;wEACR,QAAO;wEACP,MAAK;wEACL,aAAa;wEACb,MAAK;;;;;;kFAEP,6WAAC,kXAAI;wEACH,MAAK;wEACL,SAAQ;wEACR,SAAQ;wEACR,QAAO;wEACP,MAAK;wEACL,aAAa;wEACb,MAAK;;;;;;;;;;;;;;;;;;;;;6EAMb,6WAAC;wDAAI,WAAU;kEACb,cAAA,6WAAC;4DAAI,WAAU;;8EACb,6WAAC,mTAAS;oEAAC,WAAU;;;;;;8EACrB,6WAAC;8EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;sDAOb,6WAAC,iIAAI;4CAAC,WAAU;;8DACd,6WAAC,uIAAU;;sEACT,6WAAC,sIAAS;4DAAC,WAAU;;8EACnB,6WAAC,iSAAK;oEAAC,WAAU;;;;;;gEAA0B;;;;;;;sEAG7C,6WAAC,4IAAe;sEAAC;;;;;;;;;;;;8DAEnB,6WAAC,wIAAW;8DACT,gBAAgB,MAAM,GAAG,KAAK,gBAAgB,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,GAAG,mBACnE,6WAAC;wDAAI,WAAU;kEACb,cAAA,6WAAC,gZAAmB;4DAAC,OAAM;4DAAO,QAAO;sEACvC,cAAA,6WAAC,sXAAQ;gEAAC,MAAM;gEAAiB,QAAQ;oEAAE,KAAK;oEAAI,OAAO;oEAAI,MAAM;oEAAG,QAAQ;gEAAE;;kFAChF,6WAAC,oXAAK;wEAAC,SAAQ;wEAAO,QAAO;wEAAU,UAAU;wEAAI,UAAU;;;;;;kFAC/D,6WAAC,oXAAK;wEAAC,QAAO;wEAAU,UAAU;;;;;;kFAClC,6WAAC,wXAAO;wEACN,cAAc;4EACZ,iBAAiB;4EACjB,QAAQ;4EACR,cAAc;wEAChB;;;;;;kFAEF,6WAAC,gXAAG;wEAAC,SAAQ;wEAAQ,MAAK;wEAAU,QAAQ;4EAAC;4EAAG;4EAAG;4EAAG;yEAAE;wEAAE,MAAK;;;;;;;;;;;;;;;;;;;;;6EAKrE,6WAAC;wDAAI,WAAU;kEACb,cAAA,6WAAC;4DAAI,WAAU;;8EACb,6WAAC,iSAAK;oEAAC,WAAU;;;;;;8EACjB,6WAAC;8EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0CASjB,6WAAC,wIAAW;gCAAC,OAAM;0CACjB,cAAA,6WAAC,iIAAI;oCAAC,WAAU;;sDACd,6WAAC,uIAAU;;8DACT,6WAAC,sIAAS;oDAAC,WAAU;8DAAY;;;;;;8DACjC,6WAAC,4IAAe;;wDAAE,WAAW,SAAS,EAAE,cAAc;wDAAE;;;;;;;;;;;;;sDAE1D,6WAAC,wIAAW;sDACT,WAAW,SAAS,EAAE,kBAAkB,WAAW,SAAS,CAAC,cAAc,CAAC,MAAM,GAAG,kBACpF,6WAAC;gDAAI,WAAU;0DACb,cAAA,6WAAC;oDAAM,WAAU;;sEACf,6WAAC;sEACC,cAAA,6WAAC;gEAAG,WAAU;;kFACZ,6WAAC;wEAAG,WAAU;kFAAwD;;;;;;kFACtE,6WAAC;wEAAG,WAAU;kFAAwD;;;;;;kFACtE,6WAAC;wEAAG,WAAU;kFAAwD;;;;;;kFACtE,6WAAC;wEAAG,WAAU;kFAAwD;;;;;;kFACtE,6WAAC;wEAAG,WAAU;kFAAwD;;;;;;;;;;;;;;;;;sEAG1E,6WAAC;sEACE,WAAW,SAAS,CAAC,cAAc,CAAC,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,OAAO,oBAC5D,6WAAC;oEAEC,WAAU;;sFAEV,6WAAC;4EAAG,WAAU;sFACZ,cAAA,6WAAC;gFAAK,WAAU;0FACb,MAAM;;;;;;;;;;;sFAGX,6WAAC;4EAAG,WAAU;sFAAuB,MAAM,GAAG,IAAI;;;;;;sFAClD,6WAAC;4EAAG,WAAU;sFAAuB,MAAM,EAAE,IAAI;;;;;;sFACjD,6WAAC;4EAAG,WAAU;sFAAyC,MAAM,KAAK;;;;;;sFAClE,6WAAC;4EAAG,WAAU;sFACX,MAAM,GAAG,IAAI,MAAM,GAAG,GAAG,GAAG,MAAM,GAAG,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,MAAM,GAAG,CAAC,OAAO,CAAC,IAAI,GAAG;;;;;;;mEAZ5E,GAAG,MAAM,GAAG,CAAC,CAAC,EAAE,MAAM,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;qEAoBzC,6WAAC;gDAAI,WAAU;0DACb,cAAA,6WAAC;oDAAI,WAAU;;sEACb,6WAAC,iSAAK;4DAAC,WAAU;;;;;;sEACjB,6WAAC;sEAAE;;;;;;sEACH,6WAAC;4DAAE,WAAU;sEAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYpD"}},
    {"offset": {"line": 1541, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/rtfforensics_final/components/modules/tower-dump-analyzer.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useCallback, useMemo } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { Search, Download, Radio, Clock, Users, MapPin, Activity, Loader2, AlertTriangle } from \"lucide-react\"\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\"\nimport EnhancedFileUploader from \"@/components/enhanced-file-uploader\"\nimport DataTable from \"@/components/data-table\"\nimport type { ParsedData } from \"@/lib/file-parser\"\nimport { useDataStore } from \"@/lib/data-store\"\nimport { exportReport } from \"@/lib/report-generator\"\nimport { Bar, BarChart, XAxis, YAxis, Tooltip, ResponsiveContainer, Cell } from \"recharts\"\n\ninterface CoPresenceResult {\n  numbers: string[]\n  tower: string\n  timeWindow: string\n  count: number\n}\n\nexport default function TowerDumpAnalyzer() {\n  const [parsedData, setParsedData] = useState<ParsedData | null>(null)\n  const [isExporting, setIsExporting] = useState(false)\n  const [searchQuery, setSearchQuery] = useState(\"\")\n  const { addSession } = useDataStore()\n\n  const handleFileComplete = useCallback(\n    (data: ParsedData) => {\n      setParsedData(data)\n      addSession(\"tower\", \"Tower Dump Analysis\", data)\n    },\n    [addSession],\n  )\n\n  const handleExport = async (format: string) => {\n    if (!parsedData) return\n    setIsExporting(true)\n    try {\n      const config = {\n        selectedReports: [\"tower\"],\n        selectedFormat: format,\n        caseInfo: {\n          caseNumber: \"\",\n          investigator: \"\",\n          date: new Date().toISOString().split(\"T\")[0],\n          notes: \"\",\n        },\n        includeCharts: true,\n        includeMaps: false,\n        includeTables: true,\n        includeSummary: true,\n      }\n      exportReport(config, { tower: parsedData })\n    } finally {\n      setIsExporting(false)\n    }\n  }\n\n  const hitFrequencyData = useMemo(() => {\n    if (!parsedData) return []\n\n    const headers = parsedData.headers.map((h) => h.toLowerCase())\n    const msisdnCol = parsedData.headers.find(\n      (h, i) => headers[i].includes(\"msisdn\") || headers[i].includes(\"phone\") || headers[i].includes(\"number\"),\n    )\n\n    if (!msisdnCol) return []\n\n    const counts: Record<string, number> = {}\n    parsedData.rows.forEach((row) => {\n      const num = row[msisdnCol]\n      if (num) {\n        counts[num] = (counts[num] || 0) + 1\n      }\n    })\n\n    return Object.entries(counts)\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 20)\n      .map(([number, count], index) => ({\n        number: number.slice(-4),\n        fullNumber: number,\n        count,\n        color: index < 3 ? \"#22d3ee\" : index < 7 ? \"#0ea5e9\" : \"#6b7280\",\n      }))\n  }, [parsedData])\n\n  const coPresenceData = useMemo((): CoPresenceResult[] => {\n    if (!parsedData) return []\n\n    const headers = parsedData.headers.map((h) => h.toLowerCase())\n    const msisdnCol = parsedData.headers.find(\n      (h, i) => headers[i].includes(\"msisdn\") || headers[i].includes(\"phone\") || headers[i].includes(\"number\"),\n    )\n    const lacCol = parsedData.headers.find((h, i) => headers[i].includes(\"lac\"))\n    const ciCol = parsedData.headers.find((h, i) => headers[i].includes(\"ci\") || headers[i].includes(\"cell\"))\n    const timeCol = parsedData.headers.find((h, i) => headers[i].includes(\"time\") || headers[i].includes(\"date\"))\n\n    if (!msisdnCol || (!lacCol && !ciCol)) return []\n\n    // Group by tower and time window (1 hour)\n    const towerTimeGroups: Record<string, Set<string>> = {}\n\n    parsedData.rows.forEach((row) => {\n      const number = row[msisdnCol]\n      const tower = `${row[lacCol || \"\"] || \"\"}-${row[ciCol || \"\"] || \"\"}`\n      let timeWindow = \"Unknown\"\n\n      if (timeCol && row[timeCol]) {\n        try {\n          const date = new Date(row[timeCol])\n          if (!isNaN(date.getTime())) {\n            timeWindow = `${date.toISOString().split(\"T\")[0]} ${date.getHours().toString().padStart(2, \"0\")}:00`\n          }\n        } catch {\n          // Use default\n        }\n      }\n\n      const key = `${tower}|${timeWindow}`\n      if (!towerTimeGroups[key]) {\n        towerTimeGroups[key] = new Set()\n      }\n      if (number) {\n        towerTimeGroups[key].add(number)\n      }\n    })\n\n    // Find groups with multiple numbers\n    return Object.entries(towerTimeGroups)\n      .filter(([, numbers]) => numbers.size >= 2)\n      .map(([key, numbers]) => {\n        const [tower, timeWindow] = key.split(\"|\")\n        return {\n          numbers: Array.from(numbers),\n          tower,\n          timeWindow,\n          count: numbers.size,\n        }\n      })\n      .sort((a, b) => b.count - a.count)\n      .slice(0, 50)\n  }, [parsedData])\n\n  const stats = parsedData\n    ? [\n        {\n          label: \"Total Records\",\n          value: parsedData.rows.length.toLocaleString(),\n          icon: Radio,\n          color: \"text-cyan-400\",\n          bgColor: \"bg-cyan-500/10\",\n        },\n        {\n          label: \"Unique MSISDN\",\n          value: parsedData.analytics?.uniqueMSISDN?.toLocaleString() || \"0\",\n          icon: Users,\n          color: \"text-blue-400\",\n          bgColor: \"bg-blue-500/10\",\n        },\n        {\n          label: \"Time Span\",\n          value: parsedData.analytics?.timeSpan || \"N/A\",\n          icon: Clock,\n          color: \"text-teal-400\",\n          bgColor: \"bg-teal-500/10\",\n        },\n        {\n          label: \"Tower Count\",\n          value: parsedData.analytics?.towerCount?.toLocaleString() || \"0\",\n          icon: MapPin,\n          color: \"text-sky-400\",\n          bgColor: \"bg-sky-500/10\",\n        },\n      ]\n    : []\n\n  return (\n    <div className=\"p-8 space-y-6 max-w-[1600px] mx-auto\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-foreground flex items-center gap-3\">\n            <span className=\"w-1.5 h-6 bg-gradient-to-b from-cyan-500 to-blue-500 rounded-full\" />\n            Tower Dump Analyzer\n          </h1>\n          <p className=\"text-muted-foreground mt-1\">Analyze cell tower dump files for device identification</p>\n        </div>\n        {parsedData && (\n          <div className=\"flex items-center gap-3\">\n            <Button\n              variant=\"outline\"\n              className=\"gap-2 bg-transparent border-border hover:border-cyan-500/50\"\n              onClick={() => setParsedData(null)}\n            >\n              Upload New File\n            </Button>\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button\n                  className=\"gap-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500\"\n                  disabled={isExporting}\n                >\n                  {isExporting ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Download className=\"w-4 h-4\" />}\n                  Export Report\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\" className=\"w-48\">\n                <DropdownMenuItem onClick={() => handleExport(\"pdf\")}>Export as PDF</DropdownMenuItem>\n                <DropdownMenuItem onClick={() => handleExport(\"excel\")}>Export as Excel</DropdownMenuItem>\n                <DropdownMenuItem onClick={() => handleExport(\"csv\")}>Export as CSV</DropdownMenuItem>\n                <DropdownMenuItem onClick={() => handleExport(\"html\")}>Export as HTML</DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          </div>\n        )}\n      </div>\n\n      {!parsedData && (\n        <EnhancedFileUploader\n          onComplete={handleFileComplete}\n          moduleType=\"tower\"\n          acceptedFormats={[\".xls\", \".xlsx\", \".csv\", \".txt\"]}\n        />\n      )}\n\n      {parsedData && (\n        <>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            {stats.map((stat) => {\n              const Icon = stat.icon\n              return (\n                <Card key={stat.label} className=\"bg-card border-border hover:border-cyan-500/30 transition-colors\">\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm text-muted-foreground\">{stat.label}</p>\n                        <p className=\"text-2xl font-bold text-foreground mt-1\">{stat.value}</p>\n                      </div>\n                      <div className={`w-10 h-10 ${stat.bgColor} rounded-lg flex items-center justify-center`}>\n                        <Icon className={`w-5 h-5 ${stat.color}`} />\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              )\n            })}\n          </div>\n\n          <Tabs defaultValue=\"data\" className=\"space-y-4\">\n            <TabsList className=\"bg-secondary\">\n              <TabsTrigger value=\"data\">Raw Data</TabsTrigger>\n              <TabsTrigger value=\"frequency\">Hit Frequency</TabsTrigger>\n              <TabsTrigger value=\"copresence\">Co-Presence ({coPresenceData.length})</TabsTrigger>\n              <TabsTrigger value=\"timeline\">Presence Timeline</TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"data\">\n              <Card className=\"bg-card border-border\">\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"text-base\">Tower Dump Records</CardTitle>\n                    <div className=\"relative w-64\">\n                      <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                      <Input\n                        placeholder=\"Search by MSISDN, IMEI...\"\n                        value={searchQuery}\n                        onChange={(e) => setSearchQuery(e.target.value)}\n                        className=\"pl-9 bg-secondary border-border focus:border-cyan-500/50\"\n                      />\n                    </div>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <DataTable columns={parsedData.headers} data={parsedData.rows} searchQuery={searchQuery} />\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"frequency\">\n              <Card className=\"bg-card border-border\">\n                <CardHeader>\n                  <CardTitle className=\"text-base\">Hit Frequency Analysis</CardTitle>\n                  <CardDescription>Top 20 MSISDN by appearance frequency</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {hitFrequencyData.length > 0 ? (\n                    <div className=\"h-80\">\n                      <ResponsiveContainer width=\"100%\" height=\"100%\">\n                        <BarChart data={hitFrequencyData} layout=\"vertical\" margin={{ left: 10, right: 30 }}>\n                          <XAxis type=\"number\" stroke=\"#6b7280\" fontSize={12} />\n                          <YAxis type=\"category\" dataKey=\"number\" stroke=\"#6b7280\" fontSize={12} width={50} />\n                          <Tooltip\n                            contentStyle={{\n                              backgroundColor: \"#1e293b\",\n                              border: \"1px solid #0ea5e9\",\n                              borderRadius: \"8px\",\n                            }}\n                            formatter={(value: number, name: string, props?: any) => [\n                              `${value} hits`,\n                              props?.payload?.fullNumber || name,\n                            ]}\n                          />\n                          <Bar dataKey=\"count\" radius={[0, 4, 4, 0]}>\n                            {hitFrequencyData.map((entry, index) => (\n                              <Cell key={`cell-${index}`} fill={entry.color} />\n                            ))}\n                          </Bar>\n                        </BarChart>\n                      </ResponsiveContainer>\n                    </div>\n                  ) : (\n                    <div className=\"h-64 flex items-center justify-center text-muted-foreground\">\n                      <div className=\"text-center\">\n                        <Activity className=\"w-12 h-12 mx-auto mb-2 text-cyan-500/30\" />\n                        <p>No MSISDN data available for frequency analysis</p>\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"copresence\">\n              <Card className=\"bg-card border-border\">\n                <CardHeader>\n                  <CardTitle className=\"text-base flex items-center gap-2\">\n                    <AlertTriangle className=\"w-4 h-4 text-amber-400\" />\n                    Co-Presence Detection\n                  </CardTitle>\n                  <CardDescription>Multiple numbers present at same tower within 1-hour time window</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {coPresenceData.length > 0 ? (\n                    <div className=\"max-h-96 overflow-y-auto space-y-3\">\n                      {coPresenceData.map((group, idx) => (\n                        <div\n                          key={idx}\n                          className=\"p-4 rounded-lg border border-amber-500/30 bg-amber-500/5 hover:bg-amber-500/10 transition-colors\"\n                        >\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <div className=\"flex items-center gap-2\">\n                              <span className=\"w-6 h-6 rounded-full bg-amber-500/20 flex items-center justify-center text-xs text-amber-400\">\n                                {idx + 1}\n                              </span>\n                              <span className=\"font-medium text-amber-300\">{group.count} devices</span>\n                            </div>\n                            <span className=\"text-xs text-muted-foreground\">{group.timeWindow}</span>\n                          </div>\n                          <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-2\">\n                            <Radio className=\"w-3 h-3\" />\n                            <span>Tower: {group.tower}</span>\n                          </div>\n                          <div className=\"flex flex-wrap gap-2\">\n                            {group.numbers.slice(0, 10).map((num) => (\n                              <span\n                                key={num}\n                                className=\"px-2 py-1 text-xs font-mono bg-secondary rounded border border-border\"\n                              >\n                                {num}\n                              </span>\n                            ))}\n                            {group.numbers.length > 10 && (\n                              <span className=\"px-2 py-1 text-xs text-muted-foreground\">\n                                +{group.numbers.length - 10} more\n                              </span>\n                            )}\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"h-64 flex items-center justify-center text-muted-foreground\">\n                      <div className=\"text-center\">\n                        <Users className=\"w-12 h-12 mx-auto mb-2 text-cyan-500/30\" />\n                        <p>No co-presence patterns detected</p>\n                        <p className=\"text-xs mt-1\">Requires MSISDN, LAC/CI, and timestamp columns</p>\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"timeline\">\n              <Card className=\"bg-card border-border\">\n                <CardHeader>\n                  <CardTitle className=\"text-base\">Presence Timeline</CardTitle>\n                  <CardDescription>First seen, last seen, and total duration</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {parsedData.analytics?.firstActivity ? (\n                    <div className=\"space-y-4\">\n                      <div className=\"grid grid-cols-2 gap-4\">\n                        <div className=\"p-4 rounded-lg bg-secondary/50\">\n                          <p className=\"text-xs text-muted-foreground mb-1\">First Activity</p>\n                          <p className=\"font-medium\">{parsedData.analytics.firstActivity}</p>\n                        </div>\n                        <div className=\"p-4 rounded-lg bg-secondary/50\">\n                          <p className=\"text-xs text-muted-foreground mb-1\">Last Activity</p>\n                          <p className=\"font-medium\">{parsedData.analytics.lastActivity}</p>\n                        </div>\n                      </div>\n                      {parsedData.analytics.hourlyDistribution && (\n                        <div className=\"h-48\">\n                          <ResponsiveContainer width=\"100%\" height=\"100%\">\n                            <BarChart data={parsedData.analytics.hourlyDistribution}>\n                              <XAxis dataKey=\"hour\" stroke=\"#6b7280\" fontSize={10} tickFormatter={(h) => `${h}h`} />\n                              <YAxis stroke=\"#6b7280\" fontSize={10} />\n                              <Tooltip\n                                contentStyle={{\n                                  backgroundColor: \"#1e293b\",\n                                  border: \"1px solid #0ea5e9\",\n                                  borderRadius: \"8px\",\n                                }}\n                                labelFormatter={(h) => `${h}:00 - ${h}:59`}\n                              />\n                              <Bar dataKey=\"count\" fill=\"#22d3ee\" radius={[4, 4, 0, 0]} />\n                            </BarChart>\n                          </ResponsiveContainer>\n                        </div>\n                      )}\n                    </div>\n                  ) : (\n                    <div className=\"h-64 flex items-center justify-center text-muted-foreground\">\n                      <div className=\"text-center\">\n                        <Clock className=\"w-12 h-12 mx-auto mb-2 text-cyan-500/30\" />\n                        <p>Timeline requires timestamp column</p>\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2676, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/rtfforensics_final/components/modules/drive-test-analyzer.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useCallback } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { Download, Route, MapPin, Signal, AlertTriangle, Loader2 } from \"lucide-react\"\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\"\nimport FileUploader from \"@/components/file-uploader\"\nimport { parseFile, type ParsedData } from \"@/lib/file-parser\"\nimport { useDataStore } from \"@/lib/data-store\"\nimport { exportReport } from \"@/lib/report-generator\"\n\nexport default function DriveTestAnalyzer() {\n  const [driveTestData, setDriveTestData] = useState<ParsedData | null>(null)\n  const [cdrData, setCdrData] = useState<ParsedData | null>(null)\n  const [isProcessing, setIsProcessing] = useState(false)\n  const [isExporting, setIsExporting] = useState(false)\n  const [uploadStep, setUploadStep] = useState<\"drive\" | \"cdr\">(\"drive\")\n  const { addSession } = useDataStore()\n\n  const handleDriveTestUpload = useCallback(\n    async (file: File) => {\n      setIsProcessing(true)\n      try {\n        const data = await parseFile(file)\n        setDriveTestData(data)\n        addSession(\"drive\", file.name, data)\n        setUploadStep(\"cdr\")\n      } catch (error) {\n        console.error(\"Error parsing file:\", error)\n      } finally {\n        setIsProcessing(false)\n      }\n    },\n    [addSession],\n  )\n\n  const handleCDRUpload = useCallback(async (file: File) => {\n    setIsProcessing(true)\n    try {\n      const data = await parseFile(file)\n      setCdrData(data)\n    } catch (error) {\n      console.error(\"Error parsing file:\", error)\n    } finally {\n      setIsProcessing(false)\n    }\n  }, [])\n\n  const handleExport = async (format: string) => {\n    if (!driveTestData) return\n    setIsExporting(true)\n    try {\n      const config = {\n        selectedReports: [\"drive\"],\n        selectedFormat: format,\n        caseInfo: {\n          caseNumber: \"\",\n          investigator: \"\",\n          date: new Date().toISOString().split(\"T\")[0],\n          notes: \"\",\n        },\n        includeCharts: true,\n        includeMaps: true,\n        includeTables: true,\n        includeSummary: true,\n      }\n      exportReport(config, { drive: driveTestData })\n    } finally {\n      setIsExporting(false)\n    }\n  }\n\n  const hasAllData = driveTestData && cdrData\n\n  return (\n    <div className=\"p-8 space-y-6 max-w-[1600px] mx-auto\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-foreground flex items-center gap-3\">\n            <span className=\"w-1.5 h-6 bg-gradient-to-b from-cyan-500 to-blue-500 rounded-full\" />\n            Drive Test Route Analyzer\n          </h1>\n          <p className=\"text-muted-foreground mt-1\">Overlay CDR data onto operator drive test routes</p>\n        </div>\n        {hasAllData && (\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button\n                className=\"gap-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500\"\n                disabled={isExporting}\n              >\n                {isExporting ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Download className=\"w-4 h-4\" />}\n                Export Report\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\" className=\"w-48\">\n              <DropdownMenuItem onClick={() => handleExport(\"pdf\")}>Export as PDF</DropdownMenuItem>\n              <DropdownMenuItem onClick={() => handleExport(\"excel\")}>Export as Excel</DropdownMenuItem>\n              <DropdownMenuItem onClick={() => handleExport(\"csv\")}>Export as CSV</DropdownMenuItem>\n              <DropdownMenuItem onClick={() => handleExport(\"html\")}>Export as HTML</DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        )}\n      </div>\n\n      {!hasAllData && (\n        <div className=\"space-y-6\">\n          <div className=\"flex items-center gap-4\">\n            <div className={`flex items-center gap-2 ${driveTestData ? \"text-cyan-400\" : \"text-foreground\"}`}>\n              <div\n                className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${driveTestData ? \"bg-cyan-500 text-primary-foreground\" : \"bg-secondary text-foreground\"}`}\n              >\n                1\n              </div>\n              <span className=\"text-sm\">Drive Test Log</span>\n            </div>\n            <div className=\"flex-1 h-px bg-border\" />\n            <div\n              className={`flex items-center gap-2 ${cdrData ? \"text-cyan-400\" : uploadStep === \"cdr\" ? \"text-foreground\" : \"text-muted-foreground\"}`}\n            >\n              <div\n                className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${cdrData ? \"bg-cyan-500 text-primary-foreground\" : uploadStep === \"cdr\" ? \"bg-secondary text-foreground\" : \"bg-muted text-muted-foreground\"}`}\n              >\n                2\n              </div>\n              <span className=\"text-sm\">Target CDR File</span>\n            </div>\n          </div>\n\n          {uploadStep === \"drive\" && (\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-medium\">Upload Drive Test Log</h3>\n              <p className=\"text-sm text-muted-foreground\">Supported formats: TEMS, NEMO, ROMES drive test logs</p>\n              <FileUploader\n                onFileUpload={handleDriveTestUpload}\n                isProcessing={isProcessing}\n                acceptedFormats={[\".xls\", \".xlsx\", \".csv\", \".txt\"]}\n              />\n            </div>\n          )}\n\n          {uploadStep === \"cdr\" && (\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h3 className=\"text-lg font-medium\">Upload Target CDR File</h3>\n                  <p className=\"text-sm text-muted-foreground\">CDR data to overlay on the drive test route</p>\n                </div>\n                <Button variant=\"ghost\" size=\"sm\" onClick={() => setUploadStep(\"drive\")}>\n                  Change Drive Test File\n                </Button>\n              </div>\n              <FileUploader\n                onFileUpload={handleCDRUpload}\n                isProcessing={isProcessing}\n                acceptedFormats={[\".xls\", \".xlsx\", \".csv\", \".txt\"]}\n              />\n            </div>\n          )}\n        </div>\n      )}\n\n      {hasAllData && (\n        <>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            {[\n              {\n                label: \"Route Points\",\n                value: driveTestData.rows.length.toLocaleString(),\n                icon: MapPin,\n                color: \"text-cyan-400\",\n                bgColor: \"bg-cyan-500/10\",\n              },\n              {\n                label: \"CDR Events\",\n                value: cdrData.rows.length.toLocaleString(),\n                icon: Route,\n                color: \"text-blue-400\",\n                bgColor: \"bg-blue-500/10\",\n              },\n              { label: \"Weak Zones\", value: \"0\", icon: Signal, color: \"text-teal-400\", bgColor: \"bg-teal-500/10\" },\n              {\n                label: \"Call Drops\",\n                value: \"0\",\n                icon: AlertTriangle,\n                color: \"text-amber-400\",\n                bgColor: \"bg-amber-500/10\",\n              },\n            ].map((stat) => {\n              const Icon = stat.icon\n              return (\n                <Card key={stat.label} className=\"bg-card border-border hover:border-cyan-500/30 transition-colors\">\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm text-muted-foreground\">{stat.label}</p>\n                        <p className=\"text-2xl font-bold text-foreground mt-1\">{stat.value}</p>\n                      </div>\n                      <div className={`w-10 h-10 ${stat.bgColor} rounded-lg flex items-center justify-center`}>\n                        <Icon className={`w-5 h-5 ${stat.color}`} />\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              )\n            })}\n          </div>\n\n          <Tabs defaultValue=\"route\" className=\"space-y-4\">\n            <TabsList className=\"bg-secondary\">\n              <TabsTrigger value=\"route\">Route Map</TabsTrigger>\n              <TabsTrigger value=\"overlay\">CDR Overlay</TabsTrigger>\n              <TabsTrigger value=\"signal\">Signal Analysis</TabsTrigger>\n              <TabsTrigger value=\"performance\">Performance</TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"route\">\n              <Card className=\"bg-card border-border\">\n                <CardHeader>\n                  <CardTitle className=\"text-base\">Drive Test Route</CardTitle>\n                  <CardDescription>GPS route path with signal levels</CardDescription>\n                </CardHeader>\n                <CardContent className=\"h-96 flex items-center justify-center\">\n                  <div className=\"text-center text-muted-foreground\">\n                    <Route className=\"w-12 h-12 mx-auto mb-2 text-cyan-500/30\" />\n                    <p>Route visualization will appear here</p>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"overlay\">\n              <Card className=\"bg-card border-border\">\n                <CardHeader>\n                  <CardTitle className=\"text-base\">CDR Overlay</CardTitle>\n                  <CardDescription>Customer calls mapped along route</CardDescription>\n                </CardHeader>\n                <CardContent className=\"h-96 flex items-center justify-center\">\n                  <div className=\"text-center text-muted-foreground\">\n                    <MapPin className=\"w-12 h-12 mx-auto mb-2 text-cyan-500/30\" />\n                    <p>CDR overlay visualization will appear here</p>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"signal\">\n              <Card className=\"bg-card border-border\">\n                <CardHeader>\n                  <CardTitle className=\"text-base\">Signal Level Analysis</CardTitle>\n                  <CardDescription>Coverage quality along route</CardDescription>\n                </CardHeader>\n                <CardContent className=\"h-96 flex items-center justify-center\">\n                  <div className=\"text-center text-muted-foreground\">\n                    <Signal className=\"w-12 h-12 mx-auto mb-2 text-cyan-500/30\" />\n                    <p>Signal analysis will appear here</p>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"performance\">\n              <Card className=\"bg-card border-border\">\n                <CardHeader>\n                  <CardTitle className=\"text-base\">Performance Analysis</CardTitle>\n                  <CardDescription>Weak coverage and no service zones</CardDescription>\n                </CardHeader>\n                <CardContent className=\"h-96 flex items-center justify-center\">\n                  <div className=\"text-center text-muted-foreground\">\n                    <AlertTriangle className=\"w-12 h-12 mx-auto mb-2 text-cyan-500/30\" />\n                    <p>Performance analysis will appear here</p>\n                  </div>\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n\n          <div className=\"flex justify-end\">\n            <Button\n              variant=\"outline\"\n              className=\"border-border hover:border-cyan-500/50 bg-transparent\"\n              onClick={() => {\n                setDriveTestData(null)\n                setCdrData(null)\n                setUploadStep(\"drive\")\n              }}\n            >\n              Start New Analysis\n            </Button>\n          </div>\n        </>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3538, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/rtfforensics_final/components/modules/mutual-analyzer.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useCallback, useMemo } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\"\nimport { Search, Download, Users, GitBranch, Network, Loader2, FileSpreadsheet, ArrowLeftRight } from \"lucide-react\"\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\"\nimport EnhancedFileUploader from \"@/components/enhanced-file-uploader\"\nimport DataTable from \"@/components/data-table\"\nimport type { ParsedData } from \"@/lib/file-parser\"\nimport { useDataStore } from \"@/lib/data-store\"\nimport { exportReport } from \"@/lib/report-generator\"\n\ninterface MutualPair {\n  numberA: string\n  numberB: string\n  aToB: number\n  bToA: number\n  total: number\n  firstContact: string\n  lastContact: string\n}\n\ninterface ClusterResult {\n  id: number\n  members: string[]\n  totalInteractions: number\n  strength: \"strong\" | \"medium\" | \"weak\"\n}\n\nexport default function MutualAnalyzer() {\n  const [file1Data, setFile1Data] = useState<ParsedData | null>(null)\n  const [file2Data, setFile2Data] = useState<ParsedData | null>(null)\n  const [uploadStep, setUploadStep] = useState<\"file1\" | \"file2\">(\"file1\")\n  const [isExporting, setIsExporting] = useState(false)\n  const [searchQuery, setSearchQuery] = useState(\"\")\n  const { addSession } = useDataStore()\n\n  const handleFile1Complete = useCallback((data: ParsedData) => {\n    setFile1Data(data)\n    setUploadStep(\"file2\")\n  }, [])\n\n  const handleFile2Complete = useCallback(\n    (data: ParsedData) => {\n      setFile2Data(data)\n      addSession(\"mutual\", \"Mutual Analysis\", data)\n    },\n    [addSession],\n  )\n\n  const handleExport = async (format: string) => {\n    if (!file1Data || !file2Data) return\n    setIsExporting(true)\n    try {\n      const config = {\n        selectedReports: [\"mutual\"],\n        selectedFormat: format,\n        caseInfo: {\n          caseNumber: \"\",\n          investigator: \"\",\n          date: new Date().toISOString().split(\"T\")[0],\n          notes: \"\",\n        },\n        includeCharts: true,\n        includeMaps: false,\n        includeTables: true,\n        includeSummary: true,\n      }\n      exportReport(config, { mutual: file1Data })\n    } finally {\n      setIsExporting(false)\n    }\n  }\n\n  const mutualPairs = useMemo((): MutualPair[] => {\n    if (!file1Data || !file2Data) return []\n\n    const getPhoneColumn = (data: ParsedData) => {\n      const headers = data.headers.map((h) => h.toLowerCase())\n      return data.headers.find(\n        (h, i) =>\n          headers[i].includes(\"msisdn\") ||\n          headers[i].includes(\"phone\") ||\n          headers[i].includes(\"b_party\") ||\n          headers[i].includes(\"bparty\") ||\n          headers[i].includes(\"called\") ||\n          headers[i].includes(\"party b\"),\n      )\n    }\n\n    const getAPartyColumn = (data: ParsedData) => {\n      const headers = data.headers.map((h) => h.toLowerCase())\n      return data.headers.find(\n        (h, i) =>\n          headers[i].includes(\"a_party\") ||\n          headers[i].includes(\"aparty\") ||\n          headers[i].includes(\"caller\") ||\n          headers[i].includes(\"calling\") ||\n          headers[i].includes(\"party a\"),\n      )\n    }\n\n    const bCol1 = getPhoneColumn(file1Data)\n    const aCol1 = getAPartyColumn(file1Data)\n    const bCol2 = getPhoneColumn(file2Data)\n    const aCol2 = getAPartyColumn(file2Data)\n\n    if (!bCol1 && !aCol1) return []\n\n    // Get all unique numbers from both files\n    const numbers1 = new Set<string>()\n    const numbers2 = new Set<string>()\n\n    file1Data.rows.forEach((row) => {\n      if (bCol1 && row[bCol1]) numbers1.add(row[bCol1])\n      if (aCol1 && row[aCol1]) numbers1.add(row[aCol1])\n    })\n\n    file2Data.rows.forEach((row) => {\n      if (bCol2 && row[bCol2]) numbers2.add(row[bCol2])\n      if (aCol2 && row[aCol2]) numbers2.add(row[aCol2])\n    })\n\n    // Find common numbers\n    const commonNumbers = Array.from(numbers1).filter((n) => numbers2.has(n))\n\n    // Calculate interactions between common numbers\n    const interactions: Record<string, MutualPair> = {}\n\n    // Analyze file1 for interactions\n    if (aCol1 && bCol1) {\n      file1Data.rows.forEach((row) => {\n        const a = row[aCol1]\n        const b = row[bCol1]\n        if (a && b && commonNumbers.includes(a) && commonNumbers.includes(b)) {\n          const key = [a, b].sort().join(\"-\")\n          if (!interactions[key]) {\n            interactions[key] = {\n              numberA: a < b ? a : b,\n              numberB: a < b ? b : a,\n              aToB: 0,\n              bToA: 0,\n              total: 0,\n              firstContact: \"\",\n              lastContact: \"\",\n            }\n          }\n          if (a < b) {\n            interactions[key].aToB++\n          } else {\n            interactions[key].bToA++\n          }\n          interactions[key].total++\n        }\n      })\n    }\n\n    return Object.values(interactions)\n      .filter((p) => p.total > 0)\n      .sort((a, b) => b.total - a.total)\n      .slice(0, 100)\n  }, [file1Data, file2Data])\n\n  const clusters = useMemo((): ClusterResult[] => {\n    if (mutualPairs.length === 0) return []\n\n    // Simple clustering based on connected components\n    const adjacency: Record<string, Set<string>> = {}\n\n    mutualPairs.forEach((pair) => {\n      if (!adjacency[pair.numberA]) adjacency[pair.numberA] = new Set()\n      if (!adjacency[pair.numberB]) adjacency[pair.numberB] = new Set()\n      adjacency[pair.numberA].add(pair.numberB)\n      adjacency[pair.numberB].add(pair.numberA)\n    })\n\n    const visited = new Set<string>()\n    const clusterResults: ClusterResult[] = []\n    let clusterId = 0\n\n    const dfs = (node: string, cluster: Set<string>) => {\n      if (visited.has(node)) return\n      visited.add(node)\n      cluster.add(node)\n      adjacency[node]?.forEach((neighbor) => dfs(neighbor, cluster))\n    }\n\n    Object.keys(adjacency).forEach((node) => {\n      if (!visited.has(node)) {\n        const cluster = new Set<string>()\n        dfs(node, cluster)\n        if (cluster.size >= 2) {\n          const members = Array.from(cluster)\n          const interactions = mutualPairs\n            .filter((p) => cluster.has(p.numberA) && cluster.has(p.numberB))\n            .reduce((sum, p) => sum + p.total, 0)\n\n          clusterResults.push({\n            id: ++clusterId,\n            members,\n            totalInteractions: interactions,\n            strength: interactions > 50 ? \"strong\" : interactions > 20 ? \"medium\" : \"weak\",\n          })\n        }\n      }\n    })\n\n    return clusterResults.sort((a, b) => b.totalInteractions - a.totalInteractions)\n  }, [mutualPairs])\n\n  // Stats for common numbers\n  const commonNumbersCount = useMemo(() => {\n    if (!file1Data || !file2Data) return 0\n\n    const getNumbers = (data: ParsedData) => {\n      const headers = data.headers.map((h) => h.toLowerCase())\n      const col = data.headers.find(\n        (h, i) => headers[i].includes(\"msisdn\") || headers[i].includes(\"phone\") || headers[i].includes(\"number\"),\n      )\n      if (!col) return new Set<string>()\n      return new Set(data.rows.map((r) => r[col]).filter(Boolean))\n    }\n\n    const nums1 = getNumbers(file1Data)\n    const nums2 = getNumbers(file2Data)\n\n    return Array.from(nums1).filter((n) => nums2.has(n)).length\n  }, [file1Data, file2Data])\n\n  const hasAllData = file1Data && file2Data\n\n  const stats = hasAllData\n    ? [\n        {\n          label: \"File 1 Records\",\n          value: file1Data.rows.length.toLocaleString(),\n          icon: FileSpreadsheet,\n          color: \"text-cyan-400\",\n          bgColor: \"bg-cyan-500/10\",\n        },\n        {\n          label: \"File 2 Records\",\n          value: file2Data.rows.length.toLocaleString(),\n          icon: FileSpreadsheet,\n          color: \"text-blue-400\",\n          bgColor: \"bg-blue-500/10\",\n        },\n        {\n          label: \"Common Numbers\",\n          value: commonNumbersCount.toLocaleString(),\n          icon: Users,\n          color: \"text-emerald-400\",\n          bgColor: \"bg-emerald-500/10\",\n        },\n        {\n          label: \"Mutual Pairs\",\n          value: mutualPairs.length.toLocaleString(),\n          icon: ArrowLeftRight,\n          color: \"text-amber-400\",\n          bgColor: \"bg-amber-500/10\",\n        },\n      ]\n    : []\n\n  return (\n    <div className=\"p-8 space-y-6 max-w-[1600px] mx-auto\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-foreground flex items-center gap-3\">\n            <span className=\"w-1.5 h-6 bg-gradient-to-b from-cyan-500 to-blue-500 rounded-full\" />\n            Mutual Communication Analyzer\n          </h1>\n          <p className=\"text-muted-foreground mt-1\">Detect communication clusters and interaction patterns</p>\n        </div>\n        {hasAllData && (\n          <div className=\"flex items-center gap-3\">\n            <Button\n              variant=\"outline\"\n              className=\"gap-2 bg-transparent border-border hover:border-cyan-500/50\"\n              onClick={() => {\n                setFile1Data(null)\n                setFile2Data(null)\n                setUploadStep(\"file1\")\n              }}\n            >\n              Start New Analysis\n            </Button>\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button\n                  className=\"gap-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500\"\n                  disabled={isExporting}\n                >\n                  {isExporting ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Download className=\"w-4 h-4\" />}\n                  Export Report\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\" className=\"w-48\">\n                <DropdownMenuItem onClick={() => handleExport(\"pdf\")}>Export as PDF</DropdownMenuItem>\n                <DropdownMenuItem onClick={() => handleExport(\"excel\")}>Export as Excel</DropdownMenuItem>\n                <DropdownMenuItem onClick={() => handleExport(\"csv\")}>Export as CSV</DropdownMenuItem>\n                <DropdownMenuItem onClick={() => handleExport(\"html\")}>Export as HTML</DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          </div>\n        )}\n      </div>\n\n      {!hasAllData && (\n        <div className=\"space-y-6\">\n          {/* Progress indicator */}\n          <div className=\"flex items-center gap-4\">\n            <div className={`flex items-center gap-2 ${file1Data ? \"text-cyan-400\" : \"text-foreground\"}`}>\n              <div\n                className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${\n                  file1Data ? \"bg-cyan-500 text-primary-foreground\" : \"bg-secondary text-foreground\"\n                }`}\n              >\n                1\n              </div>\n              <span className=\"text-sm\">CDR File 1</span>\n            </div>\n            <div className=\"flex-1 h-px bg-border\" />\n            <div\n              className={`flex items-center gap-2 ${uploadStep === \"file2\" ? \"text-foreground\" : \"text-muted-foreground\"}`}\n            >\n              <div\n                className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${\n                  file2Data\n                    ? \"bg-cyan-500 text-primary-foreground\"\n                    : uploadStep === \"file2\"\n                      ? \"bg-secondary text-foreground\"\n                      : \"bg-muted text-muted-foreground\"\n                }`}\n              >\n                2\n              </div>\n              <span className=\"text-sm\">CDR File 2</span>\n            </div>\n          </div>\n\n          {uploadStep === \"file1\" && (\n            <div className=\"space-y-4\">\n              <h3 className=\"text-lg font-medium\">Upload First CDR File</h3>\n              <p className=\"text-sm text-muted-foreground\">Upload the first CDR file for mutual analysis</p>\n              <EnhancedFileUploader\n                onComplete={handleFile1Complete}\n                moduleType=\"cdr\"\n                acceptedFormats={[\".xls\", \".xlsx\", \".csv\", \".txt\"]}\n              />\n            </div>\n          )}\n\n          {uploadStep === \"file2\" && (\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h3 className=\"text-lg font-medium\">Upload Second CDR File</h3>\n                  <p className=\"text-sm text-muted-foreground\">Upload the second CDR file to compare</p>\n                </div>\n                <Button variant=\"ghost\" size=\"sm\" onClick={() => setUploadStep(\"file1\")}>\n                  Change First File\n                </Button>\n              </div>\n              <EnhancedFileUploader\n                onComplete={handleFile2Complete}\n                moduleType=\"cdr\"\n                acceptedFormats={[\".xls\", \".xlsx\", \".csv\", \".txt\"]}\n              />\n            </div>\n          )}\n        </div>\n      )}\n\n      {hasAllData && (\n        <>\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            {stats.map((stat) => {\n              const Icon = stat.icon\n              return (\n                <Card key={stat.label} className=\"bg-card border-border hover:border-cyan-500/30 transition-colors\">\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm text-muted-foreground\">{stat.label}</p>\n                        <p className=\"text-2xl font-bold text-foreground mt-1\">{stat.value}</p>\n                      </div>\n                      <div className={`w-10 h-10 ${stat.bgColor} rounded-lg flex items-center justify-center`}>\n                        <Icon className={`w-5 h-5 ${stat.color}`} />\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              )\n            })}\n          </div>\n\n          <Tabs defaultValue=\"mutual\" className=\"space-y-4\">\n            <TabsList className=\"bg-secondary\">\n              <TabsTrigger value=\"mutual\">Mutual Calls ({mutualPairs.length})</TabsTrigger>\n              <TabsTrigger value=\"clusters\">Clusters ({clusters.length})</TabsTrigger>\n              <TabsTrigger value=\"file1\">File 1 Data</TabsTrigger>\n              <TabsTrigger value=\"file2\">File 2 Data</TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"mutual\">\n              <Card className=\"bg-card border-border\">\n                <CardHeader>\n                  <CardTitle className=\"text-base\">Mutual Call Detection</CardTitle>\n                  <CardDescription>Numbers that communicated in both directions (A to B and B to A)</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {mutualPairs.length > 0 ? (\n                    <div className=\"max-h-96 overflow-y-auto\">\n                      <table className=\"w-full text-sm\">\n                        <thead>\n                          <tr className=\"border-b border-border\">\n                            <th className=\"text-left py-3 px-4 font-medium text-muted-foreground\">Number A</th>\n                            <th className=\"text-left py-3 px-4 font-medium text-muted-foreground\">Number B</th>\n                            <th className=\"text-center py-3 px-4 font-medium text-muted-foreground\">A  B</th>\n                            <th className=\"text-center py-3 px-4 font-medium text-muted-foreground\">B  A</th>\n                            <th className=\"text-center py-3 px-4 font-medium text-muted-foreground\">Total</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {mutualPairs.map((pair, idx) => (\n                            <tr key={idx} className=\"border-b border-border/50 hover:bg-secondary/30\">\n                              <td className=\"py-3 px-4 font-mono text-xs\">{pair.numberA}</td>\n                              <td className=\"py-3 px-4 font-mono text-xs\">{pair.numberB}</td>\n                              <td className=\"py-3 px-4 text-center text-cyan-400\">{pair.aToB}</td>\n                              <td className=\"py-3 px-4 text-center text-blue-400\">{pair.bToA}</td>\n                              <td className=\"py-3 px-4 text-center font-semibold text-emerald-400\">{pair.total}</td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  ) : (\n                    <div className=\"h-64 flex items-center justify-center text-muted-foreground\">\n                      <div className=\"text-center\">\n                        <GitBranch className=\"w-12 h-12 mx-auto mb-2 text-cyan-500/30\" />\n                        <p>No mutual communication pairs detected</p>\n                        <p className=\"text-xs mt-1\">Requires A-Party and B-Party columns in both files</p>\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"clusters\">\n              <Card className=\"bg-card border-border\">\n                <CardHeader>\n                  <CardTitle className=\"text-base\">Communication Clusters</CardTitle>\n                  <CardDescription>Groups of numbers with interconnected communication</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {clusters.length > 0 ? (\n                    <div className=\"space-y-4 max-h-96 overflow-y-auto\">\n                      {clusters.map((cluster) => (\n                        <div\n                          key={cluster.id}\n                          className={`p-4 rounded-lg border ${\n                            cluster.strength === \"strong\"\n                              ? \"border-emerald-500/30 bg-emerald-500/5\"\n                              : cluster.strength === \"medium\"\n                                ? \"border-amber-500/30 bg-amber-500/5\"\n                                : \"border-border bg-secondary/30\"\n                          }`}\n                        >\n                          <div className=\"flex items-center justify-between mb-3\">\n                            <div className=\"flex items-center gap-2\">\n                              <Network\n                                className={`w-4 h-4 ${\n                                  cluster.strength === \"strong\"\n                                    ? \"text-emerald-400\"\n                                    : cluster.strength === \"medium\"\n                                      ? \"text-amber-400\"\n                                      : \"text-muted-foreground\"\n                                }`}\n                              />\n                              <span className=\"font-medium\">Cluster #{cluster.id}</span>\n                              <span\n                                className={`text-xs px-2 py-0.5 rounded-full ${\n                                  cluster.strength === \"strong\"\n                                    ? \"bg-emerald-500/20 text-emerald-400\"\n                                    : cluster.strength === \"medium\"\n                                      ? \"bg-amber-500/20 text-amber-400\"\n                                      : \"bg-secondary text-muted-foreground\"\n                                }`}\n                              >\n                                {cluster.strength}\n                              </span>\n                            </div>\n                            <span className=\"text-sm text-muted-foreground\">\n                              {cluster.totalInteractions} interactions\n                            </span>\n                          </div>\n                          <div className=\"flex flex-wrap gap-2\">\n                            {cluster.members.slice(0, 8).map((num) => (\n                              <span\n                                key={num}\n                                className=\"px-2 py-1 text-xs font-mono bg-background rounded border border-border\"\n                              >\n                                {num}\n                              </span>\n                            ))}\n                            {cluster.members.length > 8 && (\n                              <span className=\"px-2 py-1 text-xs text-muted-foreground\">\n                                +{cluster.members.length - 8} more\n                              </span>\n                            )}\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"h-64 flex items-center justify-center text-muted-foreground\">\n                      <div className=\"text-center\">\n                        <Network className=\"w-12 h-12 mx-auto mb-2 text-cyan-500/30\" />\n                        <p>No clusters detected</p>\n                      </div>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"file1\">\n              <Card className=\"bg-card border-border\">\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"text-base\">\n                      File 1 Records ({file1Data.rows.length.toLocaleString()})\n                    </CardTitle>\n                    <div className=\"relative w-64\">\n                      <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                      <Input\n                        placeholder=\"Search records...\"\n                        value={searchQuery}\n                        onChange={(e) => setSearchQuery(e.target.value)}\n                        className=\"pl-9 bg-secondary border-border focus:border-cyan-500/50\"\n                      />\n                    </div>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <DataTable columns={file1Data.headers} data={file1Data.rows} searchQuery={searchQuery} />\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"file2\">\n              <Card className=\"bg-card border-border\">\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"text-base\">\n                      File 2 Records ({file2Data.rows.length.toLocaleString()})\n                    </CardTitle>\n                    <div className=\"relative w-64\">\n                      <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                      <Input\n                        placeholder=\"Search records...\"\n                        value={searchQuery}\n                        onChange={(e) => setSearchQuery(e.target.value)}\n                        className=\"pl-9 bg-secondary border-border focus:border-cyan-500/50\"\n                      />\n                    </div>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <DataTable columns={file2Data.headers} data={file2Data.rows} searchQuery={searchQuery} />\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4795, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/rtfforensics_final/components/modules/geo-intelligence.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useRef, useCallback } from \"react\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Switch } from \"@/components/ui/switch\"\nimport {\n  Map,\n  Layers,\n  Play,\n  Pause,\n  Download,\n  Search,\n  Filter,\n  MapPin,\n  Radio,\n  Route,\n  Thermometer,\n  Upload,\n  ZoomIn,\n  ZoomOut,\n  Maximize,\n  Sun,\n  Moon,\n  Fingerprint,\n  SatelliteDish,\n  Eraser,\n  AlertTriangle,\n  CheckCircle,\n} from \"lucide-react\"\nimport FileUploader from \"@/components/file-uploader\"\nimport { useDataStore } from \"@/lib/data-store\"\nimport { parseFile, type ParsedData } from \"@/lib/file-parser\"\n\ninterface TowerData {\n  id: number\n  mcc: string\n  mnc: string\n  lac: string\n  ci: string\n  lat: number\n  lng: number\n  provider: string\n  hits: number\n  timestamp?: string\n}\n\nconst providerColors: Record<string, string> = {\n  GP: \"#22d3ee\",\n  Robi: \"#f43f5e\",\n  Banglalink: \"#3b82f6\",\n  Teletalk: \"#f59e0b\",\n}\n\nconst EXAMPLE_PATTERNS = [\n  /^4600[0-9]$/, // Common China Mobile examples\n  /^310260$/, // Common T-Mobile US examples\n  /^test/i,\n  /^example/i,\n  /^demo/i,\n  /^sample/i,\n]\n\nexport default function GeoIntelligence() {\n  const mapRef = useRef<HTMLDivElement>(null)\n  const mapInstanceRef = useRef<unknown>(null)\n  const tileLayerRef = useRef<unknown>(null)\n  const [mapLoaded, setMapLoaded] = useState(false)\n  const [isPlaying, setIsPlaying] = useState(false)\n  const [showHeatmap, setShowHeatmap] = useState(false)\n  const [showClusters, setShowClusters] = useState(true)\n  const [showMovement, setShowMovement] = useState(true)\n  const [searchQuery, setSearchQuery] = useState(\"\")\n  const [selectedProvider, setSelectedProvider] = useState<string | null>(null)\n  const [towers, setTowers] = useState<TowerData[]>([])\n  const [parsedData, setParsedData] = useState<ParsedData | null>(null)\n  const [showUploader, setShowUploader] = useState(false)\n  const [isProcessing, setIsProcessing] = useState(false)\n  const { addSession } = useDataStore()\n\n  const [visualProtocol, setVisualProtocol] = useState<\"light\" | \"dark\">(\"dark\")\n  const [alertMessage, setAlertMessage] = useState<{ type: \"warning\" | \"success\" | \"error\"; message: string } | null>(\n    null,\n  )\n\n  const [mcc, setMcc] = useState(\"\")\n  const [mnc, setMnc] = useState(\"\")\n  const [lac, setLac] = useState(\"\")\n  const [cid, setCid] = useState(\"\")\n\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      const savedProtocol = localStorage.getItem(\"geoVisualProtocol\") as \"light\" | \"dark\" | null\n      if (savedProtocol) {\n        setVisualProtocol(savedProtocol)\n      }\n      // Clear any example data from storage\n      localStorage.removeItem(\"geoExampleData\")\n    }\n  }, [])\n\n  const validateForensicInput = useCallback((inputData: { mcc: string; mnc: string; lac: string; cid: string }) => {\n    const combinedValue = inputData.mcc + inputData.mnc\n    for (const pattern of EXAMPLE_PATTERNS) {\n      if (pattern.test(combinedValue) || pattern.test(inputData.lac) || pattern.test(inputData.cid)) {\n        setAlertMessage({\n          type: \"warning\",\n          message: \"Forensic Alert: Example data patterns detected. Use actual case data.\",\n        })\n        return false\n      }\n    }\n    return true\n  }, [])\n\n  const initiateForensicClear = useCallback(() => {\n    if (\n      confirm(\"FORENSIC SANITIZATION PROTOCOL\\n\\nThis will clear all search data and history.\\n\\nConfirm sanitization?\")\n    ) {\n      setMcc(\"\")\n      setMnc(\"\")\n      setLac(\"\")\n      setCid(\"\")\n      setTowers([])\n      setSearchQuery(\"\")\n      setSelectedProvider(null)\n      localStorage.removeItem(\"geoSearchHistory\")\n      setAlertMessage({\n        type: \"success\",\n        message: \"All data sanitized. Ready for new case.\",\n      })\n      setTimeout(() => setAlertMessage(null), 3000)\n    }\n  }, [])\n\n  const toggleVisualProtocol = useCallback(() => {\n    const newProtocol = visualProtocol === \"light\" ? \"dark\" : \"light\"\n    setVisualProtocol(newProtocol)\n    localStorage.setItem(\"geoVisualProtocol\", newProtocol)\n\n    // Update map tiles\n    if (mapInstanceRef.current && tileLayerRef.current) {\n      const L = (window as any).L\n      const tileUrl =\n        newProtocol === \"dark\"\n          ? \"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png\"\n          : \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      ;(tileLayerRef.current as { setUrl: (url: string) => void }).setUrl(tileUrl)\n    }\n  }, [visualProtocol])\n\n  const initiateTrace = useCallback(() => {\n    if (!mcc && !mnc && !lac && !cid) {\n      setAlertMessage({\n        type: \"warning\",\n        message: \"Please enter at least one cell tower parameter to initiate trace.\",\n      })\n      setTimeout(() => setAlertMessage(null), 3000)\n      return\n    }\n\n    if (!validateForensicInput({ mcc, mnc, lac, cid })) {\n      setTimeout(() => setAlertMessage(null), 3000)\n      return\n    }\n\n    setAlertMessage({\n      type: \"success\",\n      message: \"Trace initiated. Awaiting geolocation data...\",\n    })\n    setTimeout(() => setAlertMessage(null), 3000)\n  }, [mcc, mnc, lac, cid, validateForensicInput])\n\n  const handleFileUpload = useCallback(\n    async (file: File) => {\n      setIsProcessing(true)\n      try {\n        const data = await parseFile(file)\n        setParsedData(data)\n        addSession(\"geo\", file.name, data)\n        setShowUploader(false)\n      } catch (error) {\n        console.error(\"Error parsing file:\", error)\n      } finally {\n        setIsProcessing(false)\n      }\n    },\n    [addSession],\n  )\n\n  useEffect(() => {\n    if (typeof window !== \"undefined\" && !mapLoaded && mapRef.current) {\n      const loadLeaflet = async () => {\n        if (!document.querySelector('link[href*=\"leaflet\"]')) {\n          const linkEl = document.createElement(\"link\")\n          linkEl.rel = \"stylesheet\"\n          linkEl.href = \"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css\"\n          linkEl.crossOrigin = \"anonymous\"\n          document.head.appendChild(linkEl)\n        }\n\n        if (!(window as unknown as { L?: unknown }).L) {\n          const scriptEl = document.createElement(\"script\")\n          scriptEl.src = \"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js\"\n          scriptEl.crossOrigin = \"anonymous\"\n          scriptEl.onload = () => {\n            setTimeout(initializeMap, 100)\n          }\n          document.head.appendChild(scriptEl)\n        } else {\n          initializeMap()\n        }\n      }\n      loadLeaflet()\n    }\n  }, [mapLoaded])\n\n  const initializeMap = () => {\n    if (!mapRef.current) return\n    const L = (window as any).L\n    if (!L) return\n\n    if (mapInstanceRef.current) {\n      ;(mapInstanceRef.current as { remove: () => void }).remove()\n    }\n\n    const map = L.map(mapRef.current, {\n      center: [23.8103, 90.4125],\n      zoom: 12,\n      zoomControl: false,\n    })\n\n    const tileUrl =\n      visualProtocol === \"dark\"\n        ? \"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png\"\n        : \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n\n    const tileLayer = L.tileLayer(tileUrl, {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\n      maxZoom: 19,\n    }).addTo(map)\n\n    tileLayerRef.current = tileLayer\n\n    L.control.zoom({ position: \"topright\" }).addTo(map)\n\n    towers.forEach((tower) => {\n      const color = providerColors[tower.provider] || \"#6b7280\"\n\n      const marker = L.circleMarker([tower.lat, tower.lng], {\n        radius: Math.min(8 + tower.hits / 10, 15),\n        fillColor: color,\n        color: \"#fff\",\n        weight: 2,\n        opacity: 1,\n        fillOpacity: 0.8,\n      }).addTo(map)\n\n      marker.bindPopup(`\n        <div style=\"min-width: 180px; font-family: system-ui, sans-serif; background: ${visualProtocol === \"dark\" ? \"#0f172a\" : \"#ffffff\"}; padding: 12px; border-radius: 8px; color: ${visualProtocol === \"dark\" ? \"#f3f4f6\" : \"#1f2937\"};\">\n          <div style=\"font-weight: 600; margin-bottom: 8px; color: ${color};\">${tower.provider}</div>\n          <div style=\"font-size: 12px;\">\n            <div style=\"margin-bottom: 4px;\"><strong style=\"color: #22d3ee;\">MCC:</strong> ${tower.mcc || \"N/A\"}</div>\n            <div style=\"margin-bottom: 4px;\"><strong style=\"color: #22d3ee;\">MNC:</strong> ${tower.mnc || \"N/A\"}</div>\n            <div style=\"margin-bottom: 4px;\"><strong style=\"color: #22d3ee;\">LAC:</strong> ${tower.lac}</div>\n            <div style=\"margin-bottom: 4px;\"><strong style=\"color: #22d3ee;\">CI:</strong> ${tower.ci}</div>\n            <div style=\"margin-bottom: 4px;\"><strong style=\"color: #22d3ee;\">Hits:</strong> ${tower.hits}</div>\n            <div><strong style=\"color: #22d3ee;\">Coords:</strong> ${tower.lat.toFixed(4)}, ${tower.lng.toFixed(4)}</div>\n          </div>\n        </div>\n      `)\n    })\n\n    if (showMovement && towers.length > 0) {\n      const movementPath = towers.sort((a, b) => a.id - b.id).map((t) => [t.lat, t.lng] as [number, number])\n\n      L.polyline(movementPath, {\n        color: \"#22d3ee\",\n        weight: 3,\n        opacity: 0.7,\n        dashArray: \"10, 10\",\n      }).addTo(map)\n    }\n\n    mapInstanceRef.current = map\n    setMapLoaded(true)\n  }\n\n  const filteredTowers = towers.filter((tower) => {\n    if (selectedProvider && tower.provider !== selectedProvider) return false\n    if (searchQuery) {\n      const query = searchQuery.toLowerCase()\n      return tower.lac.includes(query) || tower.ci.includes(query) || tower.provider.toLowerCase().includes(query)\n    }\n    return true\n  })\n\n  return (\n    <div className={`p-8 space-y-6 max-w-[1600px] mx-auto ${visualProtocol === \"light\" ? \"bg-gray-50\" : \"\"}`}>\n      {alertMessage && (\n        <div\n          className={`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg flex items-center gap-3 ${\n            alertMessage.type === \"warning\"\n              ? \"bg-amber-500/20 border border-amber-500/50 text-amber-300\"\n              : alertMessage.type === \"success\"\n                ? \"bg-emerald-500/20 border border-emerald-500/50 text-emerald-300\"\n                : \"bg-red-500/20 border border-red-500/50 text-red-300\"\n          }`}\n        >\n          {alertMessage.type === \"warning\" ? (\n            <AlertTriangle className=\"w-5 h-5\" />\n          ) : (\n            <CheckCircle className=\"w-5 h-5\" />\n          )}\n          {alertMessage.message}\n        </div>\n      )}\n\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-foreground flex items-center gap-3\">\n            <span className=\"w-1.5 h-6 bg-gradient-to-b from-cyan-500 to-blue-500 rounded-full\" />\n            GEO Intelligence\n          </h1>\n          <p className=\"text-muted-foreground mt-1\">Cell Tower Geolocation & Forensic Analysis</p>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <div className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-secondary border border-border\">\n            <Button\n              size=\"icon\"\n              variant=\"ghost\"\n              className={`w-8 h-8 ${visualProtocol === \"light\" ? \"bg-amber-500/20 text-amber-400\" : \"\"}`}\n              onClick={toggleVisualProtocol}\n              aria-label=\"Toggle visual mode\"\n            >\n              {visualProtocol === \"light\" ? <Sun className=\"w-4 h-4\" /> : <Moon className=\"w-4 h-4\" />}\n            </Button>\n            <span className=\"text-xs text-muted-foreground\">\n              {visualProtocol === \"light\" ? \"Light Protocol\" : \"Dark Protocol\"}\n            </span>\n          </div>\n          <Button\n            variant=\"outline\"\n            className=\"gap-2 bg-transparent border-border hover:border-cyan-500/50\"\n            onClick={() => setShowUploader(!showUploader)}\n          >\n            <Upload className=\"w-4 h-4\" />\n            Load Data\n          </Button>\n          <Button className=\"gap-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500\">\n            <Download className=\"w-4 h-4\" />\n            Export Map\n          </Button>\n        </div>\n      </div>\n\n      {showUploader && (\n        <FileUploader\n          onFileUpload={handleFileUpload}\n          isProcessing={isProcessing}\n          acceptedFormats={[\".xls\", \".xlsx\", \".csv\"]}\n        />\n      )}\n\n      <div className=\"grid lg:grid-cols-4 gap-6\">\n        {/* Left sidebar - Controls */}\n        <div className=\"space-y-4\">\n          <Card className=\"bg-card border-cyan-500/20\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-sm flex items-center gap-2\">\n                <Fingerprint className=\"w-4 h-4 text-cyan-400\" />\n                Cell Tower Analysis\n              </CardTitle>\n              <div className=\"text-xs text-muted-foreground flex items-center gap-1 mt-1\">\n                <span\n                  className={`w-2 h-2 rounded-full ${visualProtocol === \"light\" ? \"bg-amber-400\" : \"bg-cyan-400\"}`}\n                />\n                {visualProtocol === \"light\" ? \"Light\" : \"Dark\"} Protocol Active\n              </div>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div className=\"grid grid-cols-2 gap-2\">\n                <div className=\"space-y-1\">\n                  <Label className=\"text-xs text-muted-foreground\">MCC</Label>\n                  <Input\n                    placeholder=\"e.g. 470\"\n                    value={mcc}\n                    onChange={(e) => setMcc(e.target.value)}\n                    className=\"bg-secondary border-border text-sm h-8 focus:border-cyan-500/50\"\n                  />\n                  <span className=\"text-[10px] text-muted-foreground\">Mobile Country Code</span>\n                </div>\n                <div className=\"space-y-1\">\n                  <Label className=\"text-xs text-muted-foreground\">MNC</Label>\n                  <Input\n                    placeholder=\"e.g. 01\"\n                    value={mnc}\n                    onChange={(e) => setMnc(e.target.value)}\n                    className=\"bg-secondary border-border text-sm h-8 focus:border-cyan-500/50\"\n                  />\n                  <span className=\"text-[10px] text-muted-foreground\">Mobile Network Code</span>\n                </div>\n              </div>\n              <div className=\"grid grid-cols-2 gap-2\">\n                <div className=\"space-y-1\">\n                  <Label className=\"text-xs text-muted-foreground\">LAC</Label>\n                  <Input\n                    placeholder=\"e.g. 1234\"\n                    value={lac}\n                    onChange={(e) => setLac(e.target.value)}\n                    className=\"bg-secondary border-border text-sm h-8 focus:border-cyan-500/50\"\n                  />\n                  <span className=\"text-[10px] text-muted-foreground\">Location Area Code</span>\n                </div>\n                <div className=\"space-y-1\">\n                  <Label className=\"text-xs text-muted-foreground\">CID</Label>\n                  <Input\n                    placeholder=\"e.g. 5678\"\n                    value={cid}\n                    onChange={(e) => setCid(e.target.value)}\n                    className=\"bg-secondary border-border text-sm h-8 focus:border-cyan-500/50\"\n                  />\n                  <span className=\"text-[10px] text-muted-foreground\">Cell ID</span>\n                </div>\n              </div>\n              <div className=\"flex gap-2 pt-2\">\n                <Button\n                  size=\"sm\"\n                  className=\"flex-1 gap-1.5 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500\"\n                  onClick={initiateTrace}\n                >\n                  <SatelliteDish className=\"w-3.5 h-3.5\" />\n                  Initiate Trace\n                </Button>\n                <Button\n                  size=\"sm\"\n                  variant=\"outline\"\n                  className=\"gap-1.5 bg-transparent border-border hover:border-red-500/50 hover:text-red-400\"\n                  onClick={initiateForensicClear}\n                >\n                  <Eraser className=\"w-3.5 h-3.5\" />\n                  Sanitize\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-card border-cyan-500/20\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-sm flex items-center gap-2\">\n                <Filter className=\"w-4 h-4 text-cyan-400\" />\n                Filters\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs text-muted-foreground\">Search LAC/CI</Label>\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                  <Input\n                    placeholder=\"Enter LAC or CI...\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    className=\"pl-9 bg-secondary border-border text-sm h-9 focus:border-cyan-500/50\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs text-muted-foreground\">Provider</Label>\n                <div className=\"flex flex-wrap gap-2\">\n                  {[\"GP\", \"Robi\", \"Banglalink\", \"Teletalk\"].map((provider) => (\n                    <Button\n                      key={provider}\n                      size=\"sm\"\n                      variant={selectedProvider === provider ? \"default\" : \"outline\"}\n                      className={`text-xs h-7 px-2 ${selectedProvider === provider ? \"bg-cyan-600 hover:bg-cyan-500\" : \"bg-transparent\"}`}\n                      onClick={() => setSelectedProvider(selectedProvider === provider ? null : provider)}\n                    >\n                      <span\n                        className=\"w-2 h-2 rounded-full mr-1.5\"\n                        style={{ backgroundColor: providerColors[provider] }}\n                      />\n                      {provider}\n                    </Button>\n                  ))}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-card border-border\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-sm flex items-center gap-2\">\n                <Layers className=\"w-4 h-4 text-cyan-400\" />\n                Layers\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <MapPin className=\"w-4 h-4 text-cyan-400\" />\n                  <span className=\"text-sm\">Tower Markers</span>\n                </div>\n                <Switch checked={true} disabled />\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <Thermometer className=\"w-4 h-4 text-muted-foreground\" />\n                  <span className=\"text-sm\">Heatmap</span>\n                </div>\n                <Switch checked={showHeatmap} onCheckedChange={setShowHeatmap} />\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <Radio className=\"w-4 h-4 text-muted-foreground\" />\n                  <span className=\"text-sm\">Clusters</span>\n                </div>\n                <Switch checked={showClusters} onCheckedChange={setShowClusters} />\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <Route className=\"w-4 h-4 text-muted-foreground\" />\n                  <span className=\"text-sm\">Movement Path</span>\n                </div>\n                <Switch checked={showMovement} onCheckedChange={setShowMovement} />\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-card border-border\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-sm\">Legend</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-2\">\n              {Object.entries(providerColors).map(([provider, color]) => (\n                <div key={provider} className=\"flex items-center gap-2\">\n                  <div className=\"w-3 h-3 rounded-full\" style={{ backgroundColor: color }} />\n                  <span className=\"text-xs text-muted-foreground\">{provider}</span>\n                </div>\n              ))}\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Map area */}\n        <div className=\"lg:col-span-3 space-y-4\">\n          <Card className=\"bg-card border-cyan-500/20 overflow-hidden\">\n            <CardContent className=\"p-0 relative\">\n              <div\n                ref={mapRef}\n                className=\"w-full h-[550px]\"\n                style={{ background: visualProtocol === \"dark\" ? \"#0f172a\" : \"#f3f4f6\" }}\n              >\n                {!mapLoaded && (\n                  <div className=\"w-full h-full flex items-center justify-center\">\n                    <div className=\"text-center text-muted-foreground\">\n                      <Map className=\"w-12 h-12 mx-auto mb-2 text-cyan-500/50 animate-pulse\" />\n                      <p>Loading map...</p>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {/* Map controls overlay */}\n              <div className=\"absolute top-4 left-4 flex flex-col gap-2\">\n                <Button size=\"icon\" variant=\"secondary\" className=\"w-8 h-8 bg-card/90 hover:bg-cyan-500/20\">\n                  <ZoomIn className=\"w-4 h-4\" />\n                </Button>\n                <Button size=\"icon\" variant=\"secondary\" className=\"w-8 h-8 bg-card/90 hover:bg-cyan-500/20\">\n                  <ZoomOut className=\"w-4 h-4\" />\n                </Button>\n                <Button size=\"icon\" variant=\"secondary\" className=\"w-8 h-8 bg-card/90 hover:bg-cyan-500/20\">\n                  <Maximize className=\"w-4 h-4\" />\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Timeline playback */}\n          <Card className=\"bg-card border-border\">\n            <CardContent className=\"py-3 px-4\">\n              <div className=\"flex items-center gap-4\">\n                <Button\n                  size=\"sm\"\n                  variant=\"outline\"\n                  className=\"gap-2 bg-transparent border-cyan-500/30 hover:bg-cyan-500/10\"\n                  onClick={() => setIsPlaying(!isPlaying)}\n                >\n                  {isPlaying ? <Pause className=\"w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\n                  {isPlaying ? \"Pause\" : \"Play\"}\n                </Button>\n                <div className=\"flex-1\">\n                  <div className=\"h-2 bg-secondary rounded-full overflow-hidden\">\n                    <div className=\"h-full w-1/3 bg-gradient-to-r from-cyan-500 to-blue-500 rounded-full transition-all\" />\n                  </div>\n                </div>\n                <span className=\"text-xs text-muted-foreground whitespace-nowrap\">Timeline: 00:00 - 23:59</span>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Tower list / Empty State */}\n          <Card className=\"bg-card border-border\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-sm\">Active Towers ({filteredTowers.length})</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {filteredTowers.length === 0 ? (\n                <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n                  <Search className=\"w-12 h-12 text-cyan-500/30 mb-4\" />\n                  <h3 className=\"text-lg font-medium text-foreground mb-2\">Awaiting Coordinates</h3>\n                  <p className=\"text-sm text-muted-foreground max-w-sm\">\n                    Enter cell tower data above or load a data file to begin geolocation analysis\n                  </p>\n                </div>\n              ) : (\n                <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                  {filteredTowers.map((tower) => (\n                    <div\n                      key={tower.id}\n                      className=\"flex items-center justify-between p-3 rounded-lg bg-secondary hover:bg-cyan-500/5 border border-transparent hover:border-cyan-500/20 cursor-pointer transition-colors\"\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <div\n                          className=\"w-3 h-3 rounded-full\"\n                          style={{ backgroundColor: providerColors[tower.provider] }}\n                        />\n                        <div>\n                          <p className=\"text-sm font-medium\">\n                            LAC {tower.lac} / CI {tower.ci}\n                          </p>\n                          <p className=\"text-xs text-muted-foreground\">{tower.provider}</p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-sm font-medium text-cyan-400\">{tower.hits} hits</p>\n                        <p className=\"text-xs text-muted-foreground font-mono\">\n                          {tower.lat.toFixed(4)}, {tower.lng.toFixed(4)}\n                        </p>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6279, "column": 0}, "map": {"version":3,"sources":["file:///home/ubuntu/rtfforensics_final/components/modules/reporting-engine.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Checkbox } from \"@/components/ui/checkbox\"\nimport { Alert, AlertDescription } from \"@/components/ui/alert\"\nimport { DeveloperCredit } from \"@/components/developer-credit\"\nimport {\n  FileText,\n  Download,\n  FileSpreadsheet,\n  File,\n  Printer,\n  Calendar,\n  User,\n  Hash,\n  CheckCircle,\n  AlertCircle,\n  Loader2,\n} from \"lucide-react\"\nimport { useDataStore } from \"@/lib/data-store\"\nimport { exportReport, type ReportConfig, type ReportData } from \"@/lib/report-generator\"\n\nconst reportTypes = [\n  { id: \"cdr\", label: \"CDR Analysis Report\", icon: FileText, description: \"Call Detail Records analysis\" },\n  { id: \"tower\", label: \"Tower Dump Report\", icon: FileText, description: \"Cell tower dump analysis\" },\n  { id: \"drive\", label: \"Drive Test Combined Report\", icon: FileText, description: \"Drive test route analysis\" },\n  { id: \"mutual\", label: \"Mutual Communication Report\", icon: FileText, description: \"Communication patterns\" },\n  { id: \"map\", label: \"Map Summary Report\", icon: FileText, description: \"Geographic visualization\" },\n  { id: \"cluster\", label: \"Cluster & Link Analysis Report\", icon: FileText, description: \"Network clustering\" },\n]\n\nconst exportFormats = [\n  { id: \"pdf\", label: \"PDF\", icon: File, description: \"Print to PDF via browser\" },\n  { id: \"excel\", label: \"Excel\", icon: FileSpreadsheet, description: \"XLSX spreadsheet format\" },\n  { id: \"csv\", label: \"CSV\", icon: FileText, description: \"Comma-separated values\" },\n  { id: \"html\", label: \"HTML (Printable)\", icon: Printer, description: \"Web-based printable report\" },\n]\n\nexport default function ReportingEngine() {\n  const [selectedReports, setSelectedReports] = useState<string[]>([])\n  const [selectedFormat, setSelectedFormat] = useState<string>(\"pdf\")\n  const [caseInfo, setCaseInfo] = useState({\n    caseNumber: \"\",\n    investigator: \"\",\n    date: new Date().toISOString().split(\"T\")[0],\n    notes: \"\",\n  })\n  const [includeCharts, setIncludeCharts] = useState(true)\n  const [includeMaps, setIncludeMaps] = useState(true)\n  const [includeTables, setIncludeTables] = useState(true)\n  const [includeSummary, setIncludeSummary] = useState(true)\n  const [isGenerating, setIsGenerating] = useState(false)\n  const [result, setResult] = useState<{ success: boolean; message: string } | null>(null)\n\n  const { sessions } = useDataStore()\n\n  const toggleReport = (reportId: string) => {\n    setSelectedReports((prev) => (prev.includes(reportId) ? prev.filter((id) => id !== reportId) : [...prev, reportId]))\n    setResult(null)\n  }\n\n  // Get available data from sessions\n  const getReportData = (): ReportData => {\n    const data: ReportData = {}\n\n    sessions.forEach((session) => {\n      switch (session.module) {\n        case \"cdr\":\n          if (!data.cdr) data.cdr = session.data\n          break\n        case \"tower\":\n          if (!data.tower) data.tower = session.data\n          break\n        case \"drive\":\n          if (!data.drive) data.drive = session.data\n          break\n        case \"mutual\":\n          if (!data.mutual) data.mutual = session.data\n          break\n        case \"geo\":\n          if (!data.geo) data.geo = session.data\n          break\n      }\n    })\n\n    return data\n  }\n\n  // Check which report types have data available\n  const availableReports = new Set(sessions.map((s) => s.module))\n\n  const handleGenerateReport = async () => {\n    setIsGenerating(true)\n    setResult(null)\n\n    try {\n      const config: ReportConfig = {\n        selectedReports,\n        selectedFormat,\n        caseInfo,\n        includeCharts,\n        includeMaps,\n        includeTables,\n        includeSummary,\n      }\n\n      const data = getReportData()\n\n      // Simulate a small delay for UX\n      await new Promise((resolve) => setTimeout(resolve, 500))\n\n      const exportResult = exportReport(config, data)\n      setResult(exportResult)\n    } catch (error) {\n      setResult({\n        success: false,\n        message: `Error: ${error instanceof Error ? error.message : \"Unknown error occurred\"}`,\n      })\n    } finally {\n      setIsGenerating(false)\n    }\n  }\n\n  const hasAvailableData = sessions.length > 0\n\n  return (\n    <div className=\"p-8 space-y-6 max-w-[1600px] mx-auto\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-foreground flex items-center gap-3\">\n            <span className=\"w-1.5 h-6 bg-gradient-to-b from-cyan-500 to-blue-500 rounded-full\" />\n            Reporting Engine\n          </h1>\n          <p className=\"text-muted-foreground mt-1\">Generate unified reports for all analysis modules</p>\n        </div>\n      </div>\n\n      {/* Status Alert */}\n      {!hasAvailableData && (\n        <Alert className=\"border-amber-500/50 bg-amber-500/10\">\n          <AlertCircle className=\"h-4 w-4 text-amber-500\" />\n          <AlertDescription className=\"text-amber-200\">\n            No analysis data available. Please upload and analyze files in the respective modules (CDR Analyzer, Tower\n            Dump, etc.) before generating reports.\n          </AlertDescription>\n        </Alert>\n      )}\n\n      {result && (\n        <Alert\n          className={result.success ? \"border-emerald-500/50 bg-emerald-500/10\" : \"border-red-500/50 bg-red-500/10\"}\n        >\n          {result.success ? (\n            <CheckCircle className=\"h-4 w-4 text-emerald-500\" />\n          ) : (\n            <AlertCircle className=\"h-4 w-4 text-red-500\" />\n          )}\n          <AlertDescription className={result.success ? \"text-emerald-200\" : \"text-red-200\"}>\n            {result.message}\n          </AlertDescription>\n        </Alert>\n      )}\n\n      <div className=\"grid lg:grid-cols-3 gap-6\">\n        <div className=\"lg:col-span-2 space-y-6\">\n          <Card className=\"bg-card border-cyan-500/20\">\n            <CardHeader>\n              <CardTitle className=\"text-base\">Select Report Types</CardTitle>\n              <CardDescription>Choose which reports to include (modules with data are highlighted)</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid md:grid-cols-2 gap-4\">\n                {reportTypes.map((report) => {\n                  const Icon = report.icon\n                  const isSelected = selectedReports.includes(report.id)\n                  const hasData = availableReports.has(report.id)\n                  return (\n                    <div\n                      key={report.id}\n                      className={`flex items-center gap-3 p-4 rounded-lg border cursor-pointer transition-all ${\n                        isSelected\n                          ? \"border-cyan-500 bg-cyan-500/10\"\n                          : hasData\n                            ? \"border-emerald-500/30 hover:border-cyan-500/50\"\n                            : \"border-border hover:border-cyan-500/50 opacity-60\"\n                      }`}\n                      onClick={() => toggleReport(report.id)}\n                    >\n                      <Checkbox checked={isSelected} />\n                      <Icon\n                        className={`w-5 h-5 ${isSelected ? \"text-cyan-400\" : hasData ? \"text-emerald-400\" : \"text-muted-foreground\"}`}\n                      />\n                      <div className=\"flex-1\">\n                        <span className={`text-sm block ${isSelected ? \"text-foreground\" : \"text-muted-foreground\"}`}>\n                          {report.label}\n                        </span>\n                        <span className=\"text-xs text-muted-foreground\">{report.description}</span>\n                      </div>\n                      {hasData && (\n                        <span className=\"text-xs px-2 py-0.5 rounded-full bg-emerald-500/20 text-emerald-400\">\n                          Data Ready\n                        </span>\n                      )}\n                    </div>\n                  )\n                })}\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-card border-border\">\n            <CardHeader>\n              <CardTitle className=\"text-base\">Case Information (Optional)</CardTitle>\n              <CardDescription>Add case details to the report header</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid md:grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label className=\"flex items-center gap-2\">\n                    <Hash className=\"w-4 h-4 text-muted-foreground\" />\n                    Case Number\n                  </Label>\n                  <Input\n                    placeholder=\"Enter case number\"\n                    value={caseInfo.caseNumber}\n                    onChange={(e) => setCaseInfo({ ...caseInfo, caseNumber: e.target.value })}\n                    className=\"bg-secondary border-border focus:border-cyan-500/50\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label className=\"flex items-center gap-2\">\n                    <User className=\"w-4 h-4 text-muted-foreground\" />\n                    Investigator Name\n                  </Label>\n                  <Input\n                    placeholder=\"Enter investigator name\"\n                    value={caseInfo.investigator}\n                    onChange={(e) => setCaseInfo({ ...caseInfo, investigator: e.target.value })}\n                    className=\"bg-secondary border-border focus:border-cyan-500/50\"\n                  />\n                </div>\n              </div>\n              <div className=\"space-y-2\">\n                <Label className=\"flex items-center gap-2\">\n                  <Calendar className=\"w-4 h-4 text-muted-foreground\" />\n                  Report Date\n                </Label>\n                <Input\n                  type=\"date\"\n                  value={caseInfo.date}\n                  onChange={(e) => setCaseInfo({ ...caseInfo, date: e.target.value })}\n                  className=\"bg-secondary border-border focus:border-cyan-500/50 w-48\"\n                />\n              </div>\n              <div className=\"space-y-2\">\n                <Label>Notes / Remarks</Label>\n                <Textarea\n                  placeholder=\"Add any additional notes or remarks...\"\n                  value={caseInfo.notes}\n                  onChange={(e) => setCaseInfo({ ...caseInfo, notes: e.target.value })}\n                  className=\"bg-secondary border-border focus:border-cyan-500/50 min-h-24\"\n                />\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-card border-border\">\n            <CardHeader>\n              <CardTitle className=\"text-base\">Report Elements</CardTitle>\n              <CardDescription>Select what to include in the report</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid md:grid-cols-2 gap-4\">\n                <div className=\"flex items-center gap-3\">\n                  <Checkbox\n                    checked={includeCharts}\n                    onCheckedChange={(checked) => setIncludeCharts(checked as boolean)}\n                  />\n                  <span className=\"text-sm\">Charts & Visualizations</span>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <Checkbox checked={includeMaps} onCheckedChange={(checked) => setIncludeMaps(checked as boolean)} />\n                  <span className=\"text-sm\">Map Screenshots</span>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <Checkbox\n                    checked={includeTables}\n                    onCheckedChange={(checked) => setIncludeTables(checked as boolean)}\n                  />\n                  <span className=\"text-sm\">Data Tables</span>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <Checkbox\n                    checked={includeSummary}\n                    onCheckedChange={(checked) => setIncludeSummary(checked as boolean)}\n                  />\n                  <span className=\"text-sm\">Summary Interpretation</span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        <div className=\"space-y-6\">\n          <Card className=\"bg-card border-cyan-500/20\">\n            <CardHeader>\n              <CardTitle className=\"text-base\">Export Format</CardTitle>\n              <CardDescription>Choose output format</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              {exportFormats.map((format) => {\n                const Icon = format.icon\n                const isSelected = selectedFormat === format.id\n                return (\n                  <div\n                    key={format.id}\n                    className={`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all ${\n                      isSelected ? \"border-cyan-500 bg-cyan-500/10\" : \"border-border hover:border-cyan-500/50\"\n                    }`}\n                    onClick={() => setSelectedFormat(format.id)}\n                  >\n                    <div\n                      className={`w-4 h-4 rounded-full border-2 flex items-center justify-center ${\n                        isSelected ? \"border-cyan-500\" : \"border-muted-foreground\"\n                      }`}\n                    >\n                      {isSelected && <div className=\"w-2 h-2 rounded-full bg-cyan-500\" />}\n                    </div>\n                    <Icon className={`w-5 h-5 ${isSelected ? \"text-cyan-400\" : \"text-muted-foreground\"}`} />\n                    <div className=\"flex-1\">\n                      <span className={`text-sm block ${isSelected ? \"text-foreground\" : \"text-muted-foreground\"}`}>\n                        {format.label}\n                      </span>\n                      <span className=\"text-xs text-muted-foreground\">{format.description}</span>\n                    </div>\n                  </div>\n                )\n              })}\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-card border-border\">\n            <CardHeader>\n              <CardTitle className=\"text-base\">Summary</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Reports Selected</span>\n                <span className=\"font-medium text-cyan-400\">{selectedReports.length}</span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Export Format</span>\n                <span className=\"font-medium uppercase\">{selectedFormat}</span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Elements</span>\n                <span className=\"font-medium\">\n                  {[includeCharts, includeMaps, includeTables, includeSummary].filter(Boolean).length}/4\n                </span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Data Available</span>\n                <span className=\"font-medium text-emerald-400\">{sessions.length} session(s)</span>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Button\n            className=\"w-full gap-2 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500\"\n            disabled={selectedReports.length === 0 || isGenerating}\n            onClick={handleGenerateReport}\n          >\n            {isGenerating ? (\n              <>\n                <Loader2 className=\"w-4 h-4 animate-spin\" />\n                Generating...\n              </>\n            ) : (\n              <>\n                <Download className=\"w-4 h-4\" />\n                Generate Report\n              </>\n            )}\n          </Button>\n\n          {selectedReports.length === 0 && (\n            <p className=\"text-xs text-center text-muted-foreground\">Select at least one report type to continue</p>\n          )}\n\n          <DeveloperCredit variant=\"compact\" className=\"justify-center pt-4\" />\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AACA;AAzBA;;;;;;;;;;;;;;AA2BA,MAAM,cAAc;IAClB;QAAE,IAAI;QAAO,OAAO;QAAuB,MAAM,8SAAQ;QAAE,aAAa;IAA+B;IACvG;QAAE,IAAI;QAAS,OAAO;QAAqB,MAAM,8SAAQ;QAAE,aAAa;IAA2B;IACnG;QAAE,IAAI;QAAS,OAAO;QAA8B,MAAM,8SAAQ;QAAE,aAAa;IAA4B;IAC7G;QAAE,IAAI;QAAU,OAAO;QAA+B,MAAM,8SAAQ;QAAE,aAAa;IAAyB;IAC5G;QAAE,IAAI;QAAO,OAAO;QAAsB,MAAM,8SAAQ;QAAE,aAAa;IAA2B;IAClG;QAAE,IAAI;QAAW,OAAO;QAAkC,MAAM,8SAAQ;QAAE,aAAa;IAAqB;CAC7G;AAED,MAAM,gBAAgB;IACpB;QAAE,IAAI;QAAO,OAAO;QAAO,MAAM,8RAAI;QAAE,aAAa;IAA2B;IAC/E;QAAE,IAAI;QAAS,OAAO;QAAS,MAAM,mUAAe;QAAE,aAAa;IAA0B;IAC7F;QAAE,IAAI;QAAO,OAAO;QAAO,MAAM,8SAAQ;QAAE,aAAa;IAAyB;IACjF;QAAE,IAAI;QAAQ,OAAO;QAAoB,MAAM,uSAAO;QAAE,aAAa;IAA6B;CACnG;AAEc,SAAS;IACtB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,gVAAQ,EAAW,EAAE;IACnE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,gVAAQ,EAAS;IAC7D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gVAAQ,EAAC;QACvC,YAAY;QACZ,cAAc;QACd,MAAM,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;QAC5C,OAAO;IACT;IACA,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,gVAAQ,EAAC;IACnD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,gVAAQ,EAAC;IAC/C,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,gVAAQ,EAAC;IACnD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,gVAAQ,EAAC;IACrD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,gVAAQ,EAAC;IACjD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,gVAAQ,EAA+C;IAEnF,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,qIAAY;IAEjC,MAAM,eAAe,CAAC;QACpB,mBAAmB,CAAC,OAAU,KAAK,QAAQ,CAAC,YAAY,KAAK,MAAM,CAAC,CAAC,KAAO,OAAO,YAAY;mBAAI;gBAAM;aAAS;QAClH,UAAU;IACZ;IAEA,mCAAmC;IACnC,MAAM,gBAAgB;QACpB,MAAM,OAAmB,CAAC;QAE1B,SAAS,OAAO,CAAC,CAAC;YAChB,OAAQ,QAAQ,MAAM;gBACpB,KAAK;oBACH,IAAI,CAAC,KAAK,GAAG,EAAE,KAAK,GAAG,GAAG,QAAQ,IAAI;oBACtC;gBACF,KAAK;oBACH,IAAI,CAAC,KAAK,KAAK,EAAE,KAAK,KAAK,GAAG,QAAQ,IAAI;oBAC1C;gBACF,KAAK;oBACH,IAAI,CAAC,KAAK,KAAK,EAAE,KAAK,KAAK,GAAG,QAAQ,IAAI;oBAC1C;gBACF,KAAK;oBACH,IAAI,CAAC,KAAK,MAAM,EAAE,KAAK,MAAM,GAAG,QAAQ,IAAI;oBAC5C;gBACF,KAAK;oBACH,IAAI,CAAC,KAAK,GAAG,EAAE,KAAK,GAAG,GAAG,QAAQ,IAAI;oBACtC;YACJ;QACF;QAEA,OAAO;IACT;IAEA,+CAA+C;IAC/C,MAAM,mBAAmB,IAAI,IAAI,SAAS,GAAG,CAAC,CAAC,IAAM,EAAE,MAAM;IAE7D,MAAM,uBAAuB;QAC3B,gBAAgB;QAChB,UAAU;QAEV,IAAI;YACF,MAAM,SAAuB;gBAC3B;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;YACF;YAEA,MAAM,OAAO;YAEb,gCAAgC;YAChC,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;YAEnD,MAAM,eAAe,IAAA,2IAAY,EAAC,QAAQ;YAC1C,UAAU;QACZ,EAAE,OAAO,OAAO;YACd,UAAU;gBACR,SAAS;gBACT,SAAS,CAAC,OAAO,EAAE,iBAAiB,QAAQ,MAAM,OAAO,GAAG,0BAA0B;YACxF;QACF,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,MAAM,mBAAmB,SAAS,MAAM,GAAG;IAE3C,qBACE,6WAAC;QAAI,WAAU;;0BACb,6WAAC;gBAAI,WAAU;0BACb,cAAA,6WAAC;;sCACC,6WAAC;4BAAG,WAAU;;8CACZ,6WAAC;oCAAK,WAAU;;;;;;gCAAsE;;;;;;;sCAGxF,6WAAC;4BAAE,WAAU;sCAA6B;;;;;;;;;;;;;;;;;YAK7C,CAAC,kCACA,6WAAC,mIAAK;gBAAC,WAAU;;kCACf,6WAAC,uTAAW;wBAAC,WAAU;;;;;;kCACvB,6WAAC,8IAAgB;wBAAC,WAAU;kCAAiB;;;;;;;;;;;;YAOhD,wBACC,6WAAC,mIAAK;gBACJ,WAAW,OAAO,OAAO,GAAG,4CAA4C;;oBAEvE,OAAO,OAAO,iBACb,6WAAC,8TAAW;wBAAC,WAAU;;;;;6CAEvB,6WAAC,uTAAW;wBAAC,WAAU;;;;;;kCAEzB,6WAAC,8IAAgB;wBAAC,WAAW,OAAO,OAAO,GAAG,qBAAqB;kCAChE,OAAO,OAAO;;;;;;;;;;;;0BAKrB,6WAAC;gBAAI,WAAU;;kCACb,6WAAC;wBAAI,WAAU;;0CACb,6WAAC,iIAAI;gCAAC,WAAU;;kDACd,6WAAC,uIAAU;;0DACT,6WAAC,sIAAS;gDAAC,WAAU;0DAAY;;;;;;0DACjC,6WAAC,4IAAe;0DAAC;;;;;;;;;;;;kDAEnB,6WAAC,wIAAW;kDACV,cAAA,6WAAC;4CAAI,WAAU;sDACZ,YAAY,GAAG,CAAC,CAAC;gDAChB,MAAM,OAAO,OAAO,IAAI;gDACxB,MAAM,aAAa,gBAAgB,QAAQ,CAAC,OAAO,EAAE;gDACrD,MAAM,UAAU,iBAAiB,GAAG,CAAC,OAAO,EAAE;gDAC9C,qBACE,6WAAC;oDAEC,WAAW,CAAC,4EAA4E,EACtF,aACI,mCACA,UACE,mDACA,qDACN;oDACF,SAAS,IAAM,aAAa,OAAO,EAAE;;sEAErC,6WAAC,yIAAQ;4DAAC,SAAS;;;;;;sEACnB,6WAAC;4DACC,WAAW,CAAC,QAAQ,EAAE,aAAa,kBAAkB,UAAU,qBAAqB,yBAAyB;;;;;;sEAE/G,6WAAC;4DAAI,WAAU;;8EACb,6WAAC;oEAAK,WAAW,CAAC,cAAc,EAAE,aAAa,oBAAoB,yBAAyB;8EACzF,OAAO,KAAK;;;;;;8EAEf,6WAAC;oEAAK,WAAU;8EAAiC,OAAO,WAAW;;;;;;;;;;;;wDAEpE,yBACC,6WAAC;4DAAK,WAAU;sEAAsE;;;;;;;mDArBnF,OAAO,EAAE;;;;;4CA2BpB;;;;;;;;;;;;;;;;;0CAKN,6WAAC,iIAAI;gCAAC,WAAU;;kDACd,6WAAC,uIAAU;;0DACT,6WAAC,sIAAS;gDAAC,WAAU;0DAAY;;;;;;0DACjC,6WAAC,4IAAe;0DAAC;;;;;;;;;;;;kDAEnB,6WAAC,wIAAW;wCAAC,WAAU;;0DACrB,6WAAC;gDAAI,WAAU;;kEACb,6WAAC;wDAAI,WAAU;;0EACb,6WAAC,mIAAK;gEAAC,WAAU;;kFACf,6WAAC,8RAAI;wEAAC,WAAU;;;;;;oEAAkC;;;;;;;0EAGpD,6WAAC,mIAAK;gEACJ,aAAY;gEACZ,OAAO,SAAS,UAAU;gEAC1B,UAAU,CAAC,IAAM,YAAY;wEAAE,GAAG,QAAQ;wEAAE,YAAY,EAAE,MAAM,CAAC,KAAK;oEAAC;gEACvE,WAAU;;;;;;;;;;;;kEAGd,6WAAC;wDAAI,WAAU;;0EACb,6WAAC,mIAAK;gEAAC,WAAU;;kFACf,6WAAC,8RAAI;wEAAC,WAAU;;;;;;oEAAkC;;;;;;;0EAGpD,6WAAC,mIAAK;gEACJ,aAAY;gEACZ,OAAO,SAAS,YAAY;gEAC5B,UAAU,CAAC,IAAM,YAAY;wEAAE,GAAG,QAAQ;wEAAE,cAAc,EAAE,MAAM,CAAC,KAAK;oEAAC;gEACzE,WAAU;;;;;;;;;;;;;;;;;;0DAIhB,6WAAC;gDAAI,WAAU;;kEACb,6WAAC,mIAAK;wDAAC,WAAU;;0EACf,6WAAC,0SAAQ;gEAAC,WAAU;;;;;;4DAAkC;;;;;;;kEAGxD,6WAAC,mIAAK;wDACJ,MAAK;wDACL,OAAO,SAAS,IAAI;wDACpB,UAAU,CAAC,IAAM,YAAY;gEAAE,GAAG,QAAQ;gEAAE,MAAM,EAAE,MAAM,CAAC,KAAK;4DAAC;wDACjE,WAAU;;;;;;;;;;;;0DAGd,6WAAC;gDAAI,WAAU;;kEACb,6WAAC,mIAAK;kEAAC;;;;;;kEACP,6WAAC,yIAAQ;wDACP,aAAY;wDACZ,OAAO,SAAS,KAAK;wDACrB,UAAU,CAAC,IAAM,YAAY;gEAAE,GAAG,QAAQ;gEAAE,OAAO,EAAE,MAAM,CAAC,KAAK;4DAAC;wDAClE,WAAU;;;;;;;;;;;;;;;;;;;;;;;;0CAMlB,6WAAC,iIAAI;gCAAC,WAAU;;kDACd,6WAAC,uIAAU;;0DACT,6WAAC,sIAAS;gDAAC,WAAU;0DAAY;;;;;;0DACjC,6WAAC,4IAAe;0DAAC;;;;;;;;;;;;kDAEnB,6WAAC,wIAAW;kDACV,cAAA,6WAAC;4CAAI,WAAU;;8DACb,6WAAC;oDAAI,WAAU;;sEACb,6WAAC,yIAAQ;4DACP,SAAS;4DACT,iBAAiB,CAAC,UAAY,iBAAiB;;;;;;sEAEjD,6WAAC;4DAAK,WAAU;sEAAU;;;;;;;;;;;;8DAE5B,6WAAC;oDAAI,WAAU;;sEACb,6WAAC,yIAAQ;4DAAC,SAAS;4DAAa,iBAAiB,CAAC,UAAY,eAAe;;;;;;sEAC7E,6WAAC;4DAAK,WAAU;sEAAU;;;;;;;;;;;;8DAE5B,6WAAC;oDAAI,WAAU;;sEACb,6WAAC,yIAAQ;4DACP,SAAS;4DACT,iBAAiB,CAAC,UAAY,iBAAiB;;;;;;sEAEjD,6WAAC;4DAAK,WAAU;sEAAU;;;;;;;;;;;;8DAE5B,6WAAC;oDAAI,WAAU;;sEACb,6WAAC,yIAAQ;4DACP,SAAS;4DACT,iBAAiB,CAAC,UAAY,kBAAkB;;;;;;sEAElD,6WAAC;4DAAK,WAAU;sEAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAOpC,6WAAC;wBAAI,WAAU;;0CACb,6WAAC,iIAAI;gCAAC,WAAU;;kDACd,6WAAC,uIAAU;;0DACT,6WAAC,sIAAS;gDAAC,WAAU;0DAAY;;;;;;0DACjC,6WAAC,4IAAe;0DAAC;;;;;;;;;;;;kDAEnB,6WAAC,wIAAW;wCAAC,WAAU;kDACpB,cAAc,GAAG,CAAC,CAAC;4CAClB,MAAM,OAAO,OAAO,IAAI;4CACxB,MAAM,aAAa,mBAAmB,OAAO,EAAE;4CAC/C,qBACE,6WAAC;gDAEC,WAAW,CAAC,4EAA4E,EACtF,aAAa,mCAAmC,0CAChD;gDACF,SAAS,IAAM,kBAAkB,OAAO,EAAE;;kEAE1C,6WAAC;wDACC,WAAW,CAAC,+DAA+D,EACzE,aAAa,oBAAoB,2BACjC;kEAED,4BAAc,6WAAC;4DAAI,WAAU;;;;;;;;;;;kEAEhC,6WAAC;wDAAK,WAAW,CAAC,QAAQ,EAAE,aAAa,kBAAkB,yBAAyB;;;;;;kEACpF,6WAAC;wDAAI,WAAU;;0EACb,6WAAC;gEAAK,WAAW,CAAC,cAAc,EAAE,aAAa,oBAAoB,yBAAyB;0EACzF,OAAO,KAAK;;;;;;0EAEf,6WAAC;gEAAK,WAAU;0EAAiC,OAAO,WAAW;;;;;;;;;;;;;+CAlBhE,OAAO,EAAE;;;;;wCAsBpB;;;;;;;;;;;;0CAIJ,6WAAC,iIAAI;gCAAC,WAAU;;kDACd,6WAAC,uIAAU;kDACT,cAAA,6WAAC,sIAAS;4CAAC,WAAU;sDAAY;;;;;;;;;;;kDAEnC,6WAAC,wIAAW;wCAAC,WAAU;;0DACrB,6WAAC;gDAAI,WAAU;;kEACb,6WAAC;wDAAK,WAAU;kEAAwB;;;;;;kEACxC,6WAAC;wDAAK,WAAU;kEAA6B,gBAAgB,MAAM;;;;;;;;;;;;0DAErE,6WAAC;gDAAI,WAAU;;kEACb,6WAAC;wDAAK,WAAU;kEAAwB;;;;;;kEACxC,6WAAC;wDAAK,WAAU;kEAAyB;;;;;;;;;;;;0DAE3C,6WAAC;gDAAI,WAAU;;kEACb,6WAAC;wDAAK,WAAU;kEAAwB;;;;;;kEACxC,6WAAC;wDAAK,WAAU;;4DACb;gEAAC;gEAAe;gEAAa;gEAAe;6DAAe,CAAC,MAAM,CAAC,SAAS,MAAM;4DAAC;;;;;;;;;;;;;0DAGxF,6WAAC;gDAAI,WAAU;;kEACb,6WAAC;wDAAK,WAAU;kEAAwB;;;;;;kEACxC,6WAAC;wDAAK,WAAU;;4DAAgC,SAAS,MAAM;4DAAC;;;;;;;;;;;;;;;;;;;;;;;;;0CAKtE,6WAAC,qIAAM;gCACL,WAAU;gCACV,UAAU,gBAAgB,MAAM,KAAK,KAAK;gCAC1C,SAAS;0CAER,6BACC;;sDACE,6WAAC,gTAAO;4CAAC,WAAU;;;;;;wCAAyB;;iEAI9C;;sDACE,6WAAC,0SAAQ;4CAAC,WAAU;;;;;;wCAAY;;;;;;;;4BAMrC,gBAAgB,MAAM,KAAK,mBAC1B,6WAAC;gCAAE,WAAU;0CAA4C;;;;;;0CAG3D,6WAAC,qJAAe;gCAAC,SAAQ;gCAAU,WAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKvD"}}]
}